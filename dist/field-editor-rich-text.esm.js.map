{"version":3,"file":"field-editor-rich-text.esm.js","sources":["../src/plugins/List/EditListWrapper.js","../src/constants/Schema.js","../src/plugins/shared/PluginApi.js","../src/plugins/shared/ToolbarIcon.js","../src/plugins/shared/PropTypes.js","../src/plugins/shared/MarkDecorator.js","../src/plugins/shared/UtilHave.js","../src/plugins/shared/MarkPlugin.js","../src/plugins/shared/Util.js","../src/plugins/shared/MarkToggleDecorator.js","../src/plugins/Bold/index.js","../src/plugins/Italic/index.js","../src/plugins/Underlined/index.js","../src/plugins/Code/index.js","../src/plugins/shared/BlockToggleDecorator.js","../src/plugins/Quote/Util.js","../src/plugins/shared/NodeDecorator.js","../src/plugins/Quote/QuotePlugin.js","../src/plugins/Quote/index.js","../node_modules/regenerator-runtime/runtime.js","../src/plugins/EmbeddedEntityBlock/FetchingWrappedEntryCard.js","../src/plugins/EmbeddedEntityBlock/FetchingWrappedAssetCard.js","../src/dialogs/HypelinkDialog/HyperlinkDialog.jsx","../src/helpers/getLinkedContentTypeIdsForNodeType.js","../src/helpers/newEntitySelectorConfigFromRichTextField.js","../src/validations/index.js","../src/plugins/Hyperlink/Util.js","../src/plugins/Hyperlink/ToolbarIcon.js","../src/plugins/Hyperlink/styles.js","../src/helpers/browserSupport.js","../src/plugins/Hyperlink/truncate.js","../src/plugins/Hyperlink/EntityHyperlinkTootip.js","../src/plugins/Hyperlink/Hyperlink.js","../src/plugins/Hyperlink/index.js","../src/plugins/Subscript/index.js","../src/plugins/Superscript/index.js","../src/plugins/shared/ToolbarDropdownListItem.js","../src/plugins/shared/BlockSelectDecorator.js","../src/plugins/Heading/HeadingDropdown.js","../src/plugins/Heading/HeadingDropdownItem.js","../src/plugins/Heading/Paragraph.js","../src/plugins/Heading/index.js","../src/plugins/NewLinePlugin/index.js","../src/plugins/Paragraph/index.js","../src/plugins/EmbeddedEntityBlock/Util.js","../src/plugins/EmbeddedEntityBlock/ToolbarIcon.js","../src/plugins/EmbeddedEntityBlock/EmbeddedEntityBlock.js","../src/plugins/EmbeddedEntityBlock/index.js","../src/plugins/EmbeddedEntryInline/Utils.js","../src/plugins/EmbeddedEntryInline/ToolbarIcon.js","../src/plugins/EmbeddedEntryInline/FetchingWrappedInlineEntryCard.js","../src/plugins/EmbeddedEntryInline/EmbeddedEntryInline.js","../src/plugins/EmbeddedEntryInline/index.js","../src/plugins/List/ToolbarDecorator.js","../src/plugins/List/index.js","../src/plugins/Hr/index.js","../src/plugins/Paste/Paste.js","../src/plugins/Paste/index.js","../src/plugins/PasteHtml/Serializer.js","../src/plugins/PasteHtml/index.js","../src/plugins/PasteText/index.js","../src/plugins/CommandPalette/Util.js","../src/plugins/CommandPalette/CommandPaletteService.js","../src/plugins/CommandPalette/CommandPanel/CommandPanelMenu.js","../src/plugins/CommandPalette/CommandPanel/index.js","../src/plugins/CommandPalette/CommandPalette.js","../src/plugins/CommandPalette/CommandMark.js","../src/plugins/CommandPalette/index.js","../src/plugins/InsertBeforeFirstVoidBlock/Util.js","../src/plugins/InsertBeforeFirstVoidBlock/index.js","../src/plugins/index.js","../src/plugins/EntryEmbedDropdown/index.js","../src/Toolbar/index.js","../src/Toolbar/StickyToolbarWrapper.js","../src/RichTextEditor.jsx","../src/dialogs/openRichTextDialog.jsx","../src/dialogs/renderRichTextDialog.jsx"],"sourcesContent":["import { BLOCKS } from '@contentful/rich-text-types';\nimport EditList from '@productboard/slate-edit-list';\n\nexport default opt => {\n  const config = {\n    types: [BLOCKS.OL_LIST, BLOCKS.UL_LIST],\n    typeItem: BLOCKS.LIST_ITEM,\n    typeDefault: BLOCKS.PARAGRAPH,\n    ...opt\n  };\n\n  const plugin = EditList(config);\n\n  return plugin;\n};\n","import fromPairs from 'lodash/fromPairs';\nimport {\n  BLOCKS,\n  INLINES,\n  TOP_LEVEL_BLOCKS,\n  VOID_BLOCKS,\n  CONTAINERS\n} from '@contentful/rich-text-types';\n\nimport ListPlugin from '../plugins/List/EditListWrapper';\n\nconst mapVoidTypes = nodeTypes => {\n  return fromPairs(nodeTypes.map(nodeType => [nodeType, { isVoid: true }]));\n};\n\nconst listPlugin = ListPlugin();\n\nexport default {\n  document: {\n    nodes: [\n      {\n        types: TOP_LEVEL_BLOCKS\n      }\n    ]\n  },\n  blocks: {\n    [BLOCKS.PARAGRAPH]: {\n      nodes: [\n        {\n          types: Object.values(INLINES)\n        },\n        {\n          objects: ['text', 'inline']\n        }\n      ]\n    },\n    [BLOCKS.HEADING_1]: {\n      nodes: [\n        {\n          types: Object.values(INLINES)\n        },\n        {\n          objects: ['text', 'inline']\n        }\n      ]\n    },\n    [BLOCKS.HEADING_2]: {\n      nodes: [\n        {\n          types: Object.values(INLINES)\n        },\n        {\n          objects: ['text', 'inline']\n        }\n      ]\n    },\n    [BLOCKS.HEADING_3]: {\n      nodes: [\n        {\n          types: Object.values(INLINES)\n        },\n        {\n          objects: ['text', 'inline']\n        }\n      ]\n    },\n    [BLOCKS.HEADING_4]: {\n      nodes: [\n        {\n          types: Object.values(INLINES)\n        },\n        {\n          objects: ['text', 'inline']\n        }\n      ]\n    },\n    [BLOCKS.HEADING_5]: {\n      nodes: [\n        {\n          types: Object.values(INLINES)\n        },\n        {\n          objects: ['text', 'inline']\n        }\n      ]\n    },\n    [BLOCKS.HEADING_6]: {\n      nodes: [\n        {\n          types: Object.values(INLINES)\n        },\n        {\n          objects: ['text', 'inline']\n        }\n      ]\n    },\n    ...mapVoidTypes(VOID_BLOCKS),\n    // The schema for the lists and list-items is defined in the slate-edit-list plugin.\n    // Due to the bug in slate@0.44.9 we have to stitch the schema manually.\n    // Related bug ticket AUTH-888\n    ...listPlugin.schema.blocks,\n    [BLOCKS.QUOTE]: {\n      nodes: [\n        {\n          match: [CONTAINERS[BLOCKS.QUOTE].map(type => ({ type }))],\n          min: 1\n        }\n      ],\n      normalize: (editor, error) => {\n        if (error.code === 'child_type_invalid') {\n          return editor.unwrapBlockByKey(error.node.key, BLOCKS.QUOTE);\n        }\n      }\n    }\n  },\n  inlines: {\n    [INLINES.HYPERLINK]: {\n      nodes: [\n        {\n          objects: ['text']\n        }\n      ]\n    },\n    [INLINES.ENTRY_HYPERLINK]: {\n      nodes: [\n        {\n          objects: ['text']\n        }\n      ]\n    },\n    [INLINES.ASSET_HYPERLINK]: {\n      nodes: [\n        {\n          objects: ['text']\n        }\n      ]\n    },\n    [INLINES.EMBEDDED_ENTRY]: {\n      isVoid: true\n    }\n  }\n};\n","import PropTypes from 'prop-types';\n\n/**\n * All known origins for Rich Text actions\n * @type {object}\n */\nexport const actionOrigin = {\n  TOOLBAR: 'toolbar-icon',\n  SHORTCUT: 'shortcut',\n  VIEWPORT: 'viewport-interaction',\n  COMMAND_PALETTE: 'command-palette',\n};\n\nconst createActionLogger = (onAction, origin) => (name, data) => {\n  onAction(name, { origin, ...data });\n};\n\n/**\n * Creates an api that is passed to editor and toolbar widgets.\n *\n * @param {object} sdk\n * @param {function } onAction\n * @returns {{ sdk: {object}, logViewportAction: {function}, createActionLogger: {function}, createActionLogger: {function} }}\n */\nexport const createRichTextAPI = ({ sdk, onAction }) => {\n  const richTextAPI = {\n    sdk,\n    logViewportAction: createActionLogger(onAction, actionOrigin.VIEWPORT),\n    logShortcutAction: createActionLogger(onAction, actionOrigin.SHORTCUT),\n    logToolbarAction: createActionLogger(onAction, actionOrigin.TOOLBAR),\n    logCommandPaletteAction: createActionLogger(onAction, actionOrigin.COMMAND_PALETTE),\n  };\n  return richTextAPI;\n};\n\n/**\n * Describes the prop types a Rich Text editor plugin can expect.\n * @type {object}\n */\nexport const EDITOR_PLUGIN_PROP_TYPES = {\n  richTextAPI: PropTypes.shape({\n    sdk: PropTypes.object.isRequired,\n    logViewportAction: PropTypes.func.isRequired,\n    logShortcutAction: PropTypes.func.isRequired,\n    logToolbarAction: PropTypes.func.isRequired,\n  }),\n};\n\n/**\n * Describes the prop types a Rich Text toolbar plugin can expect.\n * @type {object}\n */\nexport const TOOLBAR_PLUGIN_PROP_TYPES = {\n  ...EDITOR_PLUGIN_PROP_TYPES,\n  editor: PropTypes.object.isRequired,\n  onToggle: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  isButton: PropTypes.bool,\n  // TODO: Should get rid of this as it's just necessary as a hack to prevent\n  //  crashes before the user manually set the focus to the Slate input.\n  canAutoFocus: PropTypes.bool,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n// import { Icon } from '@contentful/forma-36-react-components';\nimport { EditorToolbarButton } from '@contentful/forma-36-react-components';\n\nexport default class ToolbarIcon extends Component {\n  static propTypes = {\n    isActive: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool.isRequired,\n    onToggle: PropTypes.func.isRequired,\n    icon: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    type: PropTypes.string,\n  };\n\n  handleClick = (event) => {\n    event.preventDefault();\n    this.props.onToggle(event);\n  };\n\n  render() {\n    const { icon, isActive, disabled, title, type } = this.props;\n\n    return (\n      <EditorToolbarButton\n        icon={icon}\n        tooltip={title}\n        label={title}\n        isActive={isActive}\n        disabled={disabled}\n        data-test-id={`toolbar-toggle-${type}`}\n        onClick={this.handleClick}\n      />\n    );\n  }\n}\n","import PropTypes from 'prop-types';\n\nexport const MarkPropTypes = {\n  attributes: PropTypes.object.isRequired,\n  children: PropTypes.node.isRequired,\n  mark: PropTypes.string.isRequired\n};\n\nexport const NodePropTypes = {\n  attributes: PropTypes.object.isRequired,\n  children: PropTypes.node.isRequired,\n  node: PropTypes.shape({\n    type: PropTypes.string.isRequired\n  }).isRequired\n};\n","import React from 'react';\nimport { MarkPropTypes } from './PropTypes';\n\nexport default function(Tag, tagProps = {}) {\n  const CommonMark = ({ attributes, children }) => {\n    return (\n      <Tag {...tagProps} {...attributes}>\n        {children}\n      </Tag>\n    );\n  };\n\n  CommonMark.displayName = `${Tag}-mark`;\n  CommonMark.propTypes = MarkPropTypes;\n\n  return CommonMark;\n}\n","export const haveMarks = ({ value }, type) => {\n  return value.activeMarks.some(mark => mark.type === type);\n};\n\nexport const haveBlocks = ({ value }, type) => {\n  return value.blocks.some(node => node.type === type);\n};\n\nexport const haveInlines = ({ value }, type) => {\n  return value.inlines.some(inline => inline.type === type);\n};\n\nexport function haveAnyInlines({ value }) {\n  return value.inlines.size > 0;\n}\n\n/**\n * Checks if all inline nodes in the selectin have a certain type.\n * Returns false if there are no inline nodes in the selection.\n *\n * @param {slate.Editor} editor\n * @param {string} type\n * @returns {boolean}\n */\nexport function haveEveryInlineOfType({ value }, type) {\n  if (value.inlines.size > 0) {\n    return value.inlines.every(inline => inline.type === type);\n  }\n\n  return false;\n}\n\nexport const haveTextInSomeBlocks = ({ value }) => {\n  if (value.blocks.size > 0) {\n    return value.blocks.some(block => block.text);\n  }\n};\n","import isHotkey from 'is-hotkey';\nimport markDecorator from './MarkDecorator';\nimport { haveMarks } from './UtilHave';\nimport { css } from 'emotion';\nimport tokens from '@contentful/forma-36-tokens';\n\nconst styles = {\n  // TODO: Ensure a bold mark on a headline makes the heading appear even\n  //  bolder. Consider to make headings non-bold by default.\n  bold: css({\n    color: 'inherit',\n    fontWeight: tokens.fontWeightDemiBold,\n  }),\n  italic: css({\n    fontStyle: 'italic',\n    lineHeight: 1, // Prevents vertical jitter effect when applying code mark.\n  }),\n  code: css({\n    fontFamily: tokens.fontStackMonospace,\n    fontSize: '.9em', // Can't use `rem` to account for code inside a heading.\n  }),\n};\n\nexport default function ({ type, tagName, hotkey, richTextAPI }) {\n  return {\n    renderMark: (props, _editor, next) => {\n      if (props.mark.type === type) {\n        return markDecorator(tagName, { className: styles[type] })(props);\n      }\n      return next();\n    },\n    onKeyDown(event, editor, next) {\n      if (isHotkey(hotkey, event)) {\n        editor.toggleMark(type);\n\n        const action = haveMarks(editor, type) ? 'mark' : 'unmark';\n        richTextAPI.logShortcutAction(action, { markType: type });\n        return;\n      }\n      return next();\n    },\n  };\n}\n","/**\n * Handles setting the focus in the Slate editor (if possible due to Slate restrictions)\n * when clicking on a toolbar acton while the editor got no focus.\n *\n * Ideally we would always focus the editor in his case, but this might result\n * in a Slate crash if the editor hasn't been manually focused by the user at\n * that point.\n */\nexport const toolbarActionHandlerWithSafeAutoFocus = (component, customHandler) => (event) => {\n  event.preventDefault();\n\n  const { editor, canAutoFocus } = component.props;\n\n  if (!editor.value.selection.isFocused) {\n    if (canAutoFocus) {\n      editor.focus();\n    } else {\n      // Note: This is only necessary as Slate in 0.4x in our case crashes when\n      //  working on the document before the user manually focuses. Attempts at\n      //  programmatically setting focus and a proper value.selection were in vain.\n      // TODO: Upgrade Slate or figure out how to editor.setFocus when clicking\n      //  a toolbar icon without the editor crashing when starting to type.\n      return;\n    }\n  }\n  return customHandler(event);\n};\n","import * as React from 'react';\nimport { haveMarks } from './UtilHave';\nimport { toolbarActionHandlerWithSafeAutoFocus } from './Util';\nimport { TOOLBAR_PLUGIN_PROP_TYPES } from './PluginApi';\n\nexport default ({ type, title, icon }) => (Mark) => {\n  return class CommonToggleMark extends React.Component {\n    static propTypes = TOOLBAR_PLUGIN_PROP_TYPES;\n\n    handleToggle = toolbarActionHandlerWithSafeAutoFocus(this, () => {\n      const {\n        editor,\n        onToggle,\n        richTextAPI: { logToolbarAction },\n      } = this.props;\n      onToggle(editor.toggleMark(type));\n      const action = haveMarks(editor, type) ? 'mark' : 'unmark';\n      logToolbarAction(action, { markType: type });\n    });\n\n    render() {\n      const { editor, disabled } = this.props;\n      return (\n        <Mark\n          type={type}\n          icon={icon}\n          title={title}\n          onToggle={this.handleToggle}\n          isActive={haveMarks(editor, type)}\n          disabled={disabled}\n        />\n      );\n    }\n  };\n};\n","import React, { Component } from 'react';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport markPlugin from '../shared/MarkPlugin';\nimport markToggleDecorator from '../shared/MarkToggleDecorator';\nimport { MARKS } from '@contentful/rich-text-types';\n\nexport const BoldPlugin = ({ richTextAPI }) => {\n  return markPlugin({\n    type: MARKS.BOLD,\n    tagName: 'b',\n    hotkey: ['mod+b'],\n    richTextAPI\n  });\n};\n\nclass Bold extends Component {\n  render() {\n    return <ToolbarIcon {...this.props} />;\n  }\n}\n\nexport default markToggleDecorator({\n  type: MARKS.BOLD,\n  title: 'Bold',\n  icon: 'FormatBold'\n})(Bold);\n","import React, { Component } from 'react';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport markPlugin from '../shared/MarkPlugin';\nimport markToggleDecorator from '../shared/MarkToggleDecorator';\nimport { MARKS } from '@contentful/rich-text-types';\n\nexport const ItalicPlugin = ({ richTextAPI }) => {\n  return markPlugin({\n    type: MARKS.ITALIC,\n    tagName: 'em',\n    hotkey: ['mod+i'],\n    richTextAPI\n  });\n};\n\nclass Italic extends Component {\n  render() {\n    return <ToolbarIcon {...this.props} />;\n  }\n}\n\nexport default markToggleDecorator({\n  type: MARKS.ITALIC,\n  title: 'Italic',\n  icon: 'FormatItalic'\n})(Italic);\n","import React, { Component } from 'react';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport markPlugin from '../shared/MarkPlugin';\nimport markToggleDecorator from '../shared/MarkToggleDecorator';\nimport { MARKS } from '@contentful/rich-text-types';\n\nexport const UnderlinedPlugin = ({ richTextAPI }) => {\n  return markPlugin({\n    type: MARKS.UNDERLINE,\n    tagName: 'u',\n    hotkey: ['mod+u'],\n    richTextAPI\n  });\n};\n\nclass Underlined extends Component {\n  render() {\n    return <ToolbarIcon {...this.props} />;\n  }\n}\n\nexport default markToggleDecorator({\n  type: MARKS.UNDERLINE,\n  title: 'Underline',\n  icon: 'FormatUnderlined'\n})(Underlined);\n","import React, { Component } from 'react';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport markPlugin from '../shared/MarkPlugin';\nimport markToggleDecorator from '../shared/MarkToggleDecorator';\nimport { MARKS } from '@contentful/rich-text-types';\n\nexport const CodePlugin = ({ richTextAPI }) => {\n  return markPlugin({\n    type: MARKS.CODE,\n    tagName: 'code',\n    hotkey: ['mod+/'],\n    richTextAPI\n  });\n};\n\nclass Code extends Component {\n  render() {\n    return <ToolbarIcon {...this.props} />;\n  }\n}\n\nexport default markToggleDecorator({\n  type: MARKS.CODE,\n  title: 'Code',\n  icon: 'Code'\n})(Code);\n","import * as React from 'react';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport { haveBlocks } from './UtilHave';\nimport { toolbarActionHandlerWithSafeAutoFocus } from './Util';\nimport { TOOLBAR_PLUGIN_PROP_TYPES } from './PluginApi';\n\n/**\n * Toggles formatting between a given node type and a plain paragraph.\n *\n * @param {slate.Editor} editor\n * @param {stirng} type\n * @returns {boolean} New toggle state after the change.\n */\nexport const toggleChange = (editor, type) => {\n  const isActive = haveBlocks(editor, type);\n  editor.setBlocks(isActive ? BLOCKS.PARAGRAPH : type);\n  return !isActive;\n};\n\nconst isBlockActive = (editor, type) => haveBlocks(editor, type);\n\nexport default ({ type, title, icon, applyChange = toggleChange, isActive = isBlockActive }) => (\n  Block\n) => {\n  return class BlockToggleDecorator extends React.Component {\n    static propTypes = TOOLBAR_PLUGIN_PROP_TYPES;\n\n    handleToggle = toolbarActionHandlerWithSafeAutoFocus(this, () => {\n      const {\n        editor,\n        onToggle,\n        richTextAPI: { logToolbarAction },\n      } = this.props;\n      const isActive = applyChange(editor, type);\n      onToggle(editor);\n      const actionName = isActive ? 'insert' : 'remove';\n      logToolbarAction(actionName, { nodeType: type });\n    });\n\n    render() {\n      const { editor, disabled, richTextAPI } = this.props;\n\n      return (\n        <Block\n          type={type}\n          icon={icon}\n          title={title}\n          onToggle={this.handleToggle}\n          isActive={isActive(editor, type)}\n          disabled={disabled}\n          richTextAPI={richTextAPI}\n        />\n      );\n    }\n  };\n};\n","import { BLOCKS } from '@contentful/rich-text-types';\n\nconst getParent = editor => {\n  const range = editor.value.selection;\n\n  if (!range.start.key) {\n    return null;\n  }\n\n  const startBlock = editor.value.document.getClosestBlock(range.start.key);\n\n  return editor.value.document.getParent(startBlock.key);\n};\n\nexport const isSelectionInQuote = editor => {\n  const ancestor = getParent(editor);\n\n  if (!ancestor) {\n    return false;\n  }\n\n  return ancestor.type === BLOCKS.QUOTE;\n};\n\n/**\n * Toggles formatting between block quote and a plain paragraph.\n *\n * @param {slate.Editor} editor\n * @returns {boolean} New toggle state after the change.\n */\nexport const applyChange = editor => {\n  const isActive = isSelectionInQuote(editor);\n  if (isActive) {\n    editor.unwrapBlock(BLOCKS.QUOTE);\n  } else {\n    editor.setBlocks(BLOCKS.PARAGRAPH).wrapBlock(BLOCKS.QUOTE);\n  }\n  return !isActive;\n};\n","import * as React from 'react';\nimport { NodePropTypes } from './PropTypes';\nimport { css } from 'emotion';\nimport camelCase from 'lodash/camelCase';\nimport tokens from '@contentful/forma-36-tokens';\n\nconst headingCss = {\n  fontWeight: tokens.fontWeightMedium,\n  lineHeight: '1.3',\n  margin: `0 0 ${tokens.spacingS}`\n};\n\nconst styles = {\n  paragraph: css({\n    lineHeight: tokens.lineHeightDefault,\n    marginBottom: '1.5em'\n  }),\n  bold: css({\n    color: 'inherit',\n    fontWeight: tokens.fontWeightDemiBold\n  }),\n  blockquote: css({\n    margin: '0 0 1.3125rem',\n    borderLeft: `6px solid ${tokens.colorElementLight}`,\n    paddingLeft: '0.875rem',\n    fontStyle: 'normal',\n    '& a': {\n      color: 'inherit'\n    }\n  }),\n  code: css({\n    background: tokens.colorElementLight,\n    padding: '0px',\n    color: tokens.colorTextMid,\n    borderRadius: '2px'\n  }),\n  textLink: css({\n    fontSize: 'inherit'\n  }),\n  orderedList: css({\n    margin: '0 0 1.25rem 1.25rem',\n    listStyleType: 'decimal',\n    '[data-test-id=\"ordered-list\"]': {\n      listStyleType: 'upper-alpha',\n      '[data-test-id=\"ordered-list\"]': {\n        listStyleType: 'lower-roman',\n        '[data-test-id=\"ordered-list\"]': {\n          listStyleType: 'lower-alpha'\n        }\n      }\n    },\n    '[data-test-id=\"paragraph\"]': {\n      margin: 0,\n      lineHeight: tokens.lineHeightDefault\n    }\n  }),\n  unorderedList: css({\n    margin: '0 0 1.25rem 1.25rem',\n    listStyleType: 'disc',\n    '[data-test-id=\"unordered-list\"]': {\n      listStyleType: 'circle',\n      '[data-test-id=\"unordered-list\"]': {\n        listStyleType: 'square'\n      }\n    },\n    '[data-test-id=\"paragraph\"]': {\n      margin: 0,\n      lineHeight: tokens.lineHeightDefault\n    }\n  }),\n  listItem: css({\n    listStyle: 'inherit',\n    margin: 0,\n    '[data-test-id=\"ordered-list\"], [data-test-id=\"unordered-list\"]': {\n      margin: `0 0 0 ${tokens.spacingL}`\n    }\n  }),\n  heading1: css({\n    ...headingCss,\n    fontSize: '1.875rem'\n  }),\n  heading2: css({\n    ...headingCss,\n    fontSize: '1.5625rem'\n  }),\n  heading3: css({\n    ...headingCss,\n    fontSize: '1.375rem'\n  }),\n  heading4: css({\n    ...headingCss,\n    fontSize: '1.25rem'\n  }),\n  heading5: css({\n    ...headingCss,\n    fontSize: '1.125rem'\n  }),\n  heading6: css({\n    ...headingCss,\n    fontSize: '1rem'\n  })\n};\n\nexport default function(Tag, tagProps = {}) {\n  const CommonNode = ({ attributes, children, node }) => {\n    return (\n      <Tag\n        className={styles[camelCase(node.type)]}\n        data-test-id={node.type}\n        {...tagProps}\n        {...attributes}>\n        {children}\n      </Tag>\n    );\n  };\n\n  CommonNode.displayName = `${Tag}-node`;\n  CommonNode.propTypes = NodePropTypes;\n\n  return CommonNode;\n}\n","import isHotkey from 'is-hotkey';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport { applyChange, isSelectionInQuote } from './Util';\nimport commonNode from '../shared/NodeDecorator';\nimport { haveTextInSomeBlocks } from '../shared/UtilHave';\n\nconst newPlugin = (defaultType, tagName, hotkey) => ({\n  type = defaultType,\n  richTextAPI: { logShortcutAction }\n}) => {\n  return {\n    renderNode: (props, _editor, next) => {\n      if (props.node.type === type) {\n        return commonNode(tagName)(props);\n      }\n      return next();\n    },\n    onKeyDown: (e, editor, next) => {\n      if (isHotkey(hotkey, e)) {\n        const isActive = applyChange(editor);\n        const actionName = isActive ? 'insert' : 'remove';\n        logShortcutAction(actionName, { nodeType: type });\n        return;\n      }\n      if (isHotkey('Backspace', e) && isSelectionInQuote(editor) && !haveTextInSomeBlocks(editor)) {\n        editor.unwrapBlock(BLOCKS.QUOTE).delete();\n        return;\n      }\n      return next();\n    }\n  };\n};\n\nconst QuotePlugin = newPlugin(BLOCKS.QUOTE, 'blockquote', ['mod+shift+1']);\n\nexport default QuotePlugin;\n","import React, { Component } from 'react';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport blockToggleDecorator from '../shared/BlockToggleDecorator';\nimport { applyChange, isSelectionInQuote } from './Util';\n\nclass Blockquote extends Component {\n  render() {\n    return <ToolbarIcon {...this.props} />;\n  }\n}\n\n// TODO: Currently it seems this is the only place using `blockToggleDecorator` but we still\n//  have to inject a custom `applyChange`. Seems like we could get rid of blockToggleDecorator.\nexport default blockToggleDecorator({\n  type: BLOCKS.QUOTE,\n  title: 'Blockquote',\n  icon: 'Quote',\n  applyChange,\n  isActive: isSelectionInQuote\n})(Blockquote);\n\nexport { default as QuotePlugin } from './QuotePlugin';\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { EntryCard } from '@contentful/forma-36-react-components';\nimport {\n  useEntities,\n  MissingEntityCard,\n  WrappedEntryCard,\n} from '@contentful/field-editor-reference';\n\nexport function FetchingWrappedEntryCard(props) {\n  const { loadEntry, entries } = useEntities();\n\n  React.useEffect(() => {\n    loadEntry(props.entryId);\n  }, [props.entryId]);\n\n  const entry = entries[props.entryId];\n\n  React.useEffect(() => {\n    if (entry) {\n      props.onEntityFetchComplete && props.onEntityFetchComplete();\n    }\n  }, [entry]);\n\n  if (entry === 'failed') {\n    return (\n      <MissingEntityCard\n        entityType=\"Entry\"\n        isDisabled={props.isDisabled}\n        onRemove={props.onRemove}\n      />\n    );\n  }\n\n  if (entry === undefined) {\n    return <EntryCard size=\"default\" loading />;\n  }\n\n  const contentType = props.sdk.space\n    .getCachedContentTypes()\n    .find((contentType) => contentType.sys.id === entry.sys.contentType.sys.id);\n\n  return (\n    <WrappedEntryCard\n      getAsset={props.sdk.space.getAsset}\n      getEntityScheduledActions={props.sdk.space.getEntityScheduledActions}\n      entryUrl={props.getEntryUrl && props.getEntryUrl(entry.sys.id)}\n      size=\"default\"\n      isSelected={props.isSelected}\n      isDisabled={props.isDisabled}\n      localeCode={props.locale}\n      defaultLocaleCode={props.sdk.locales.default}\n      contentType={contentType}\n      entry={entry}\n      onEdit={props.onEdit}\n      onRemove={props.onRemove}\n      isClickable={false}\n    />\n  );\n}\n\nFetchingWrappedEntryCard.propTypes = {\n  sdk: PropTypes.object.isRequired,\n  entryId: PropTypes.string.isRequired,\n  locale: PropTypes.string.isRequired,\n  isDisabled: PropTypes.bool.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n  onRemove: PropTypes.func,\n  onEdit: PropTypes.func,\n  getEntryUrl: PropTypes.func,\n  onEntityFetchComplete: PropTypes.func,\n};\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { AssetCard } from '@contentful/forma-36-react-components';\nimport {\n  useEntities,\n  MissingEntityCard,\n  WrappedAssetCard,\n} from '@contentful/field-editor-reference';\n\nexport function FetchingWrappedAssetCard(props) {\n  const { loadAsset, assets } = useEntities();\n\n  React.useEffect(() => {\n    loadAsset(props.assetId);\n  }, [props.assetId]);\n\n  const asset = assets[props.assetId];\n\n  React.useEffect(() => {\n    if (asset) {\n      props.onEntityFetchComplete && props.onEntityFetchComplete();\n    }\n  }, [asset]);\n\n  if (asset === 'failed') {\n    return (\n      <MissingEntityCard\n        entityType=\"Asset\"\n        isDisabled={props.isDisabled}\n        onRemove={props.onRemove}\n      />\n    );\n  }\n\n  if (asset === undefined) {\n    return <AssetCard size=\"default\" isLoading title=\"\" src=\"\" href=\"\" />;\n  }\n\n  return (\n    <WrappedAssetCard\n      getAsset={props.sdk.space.getAsset}\n      getEntityScheduledActions={props.sdk.space.getEntityScheduledActions}\n      getAssetUrl={props.getAssetUrl}\n      size=\"default\"\n      isSelected={props.isSelected}\n      isDisabled={props.isDisabled}\n      localeCode={props.locale}\n      defaultLocaleCode={props.sdk.locales.default}\n      asset={asset}\n      onEdit={props.onEdit}\n      onRemove={props.onRemove}\n      isClickable={false}\n    />\n  );\n}\n\nFetchingWrappedAssetCard.propTypes = {\n  sdk: PropTypes.object.isRequired,\n  locale: PropTypes.string.isRequired,\n  assetId: PropTypes.string.isRequired,\n  isDisabled: PropTypes.bool.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n  onRemove: PropTypes.func,\n  onEdit: PropTypes.func,\n  getAssetUrl: PropTypes.func,\n  onEntityFetchComplete: PropTypes.func,\n};\n","import React from 'react';\nimport { css } from 'emotion';\nimport PropTypes from 'prop-types';\nimport tokens from '@contentful/forma-36-tokens';\nimport {\n  Modal,\n  TextField,\n  Button,\n  Form,\n  FormLabel,\n  TextLink,\n  SelectField,\n  Option,\n} from '@contentful/forma-36-react-components';\nimport { EntityProvider } from '@contentful/field-editor-reference';\nimport { FetchingWrappedEntryCard } from '../../plugins/EmbeddedEntityBlock/FetchingWrappedEntryCard';\nimport { FetchingWrappedAssetCard } from '../../plugins/EmbeddedEntityBlock/FetchingWrappedAssetCard';\n\nexport const LINK_TYPES = {\n  URI: 'uri',\n  ENTRY: 'Entry',\n  ASSET: 'Asset',\n};\n\nfunction isFeaturingEntitySelector(entitySelectorConfigs = {}) {\n  return !!entitySelectorConfigs.Entry || !!entitySelectorConfigs.Asset;\n}\n\nfunction entityToLink(entity) {\n  const { id, type } = entity.sys;\n  return { sys: { id, type: 'Link', linkType: type } };\n}\n\nexport class HyperlinkDialog extends React.Component {\n  static propTypes = {\n    sdk: PropTypes.object.isRequired,\n    labels: PropTypes.shape({\n      title: PropTypes.string,\n      confirm: PropTypes.string,\n    }),\n    value: PropTypes.shape({\n      text: PropTypes.string,\n      uri: PropTypes.string,\n      target: PropTypes.object,\n      // Will be overwritten accordingly if `uri` or `target.sys.linkType` are set.\n      type: PropTypes.oneOf(['uri', 'Entry', 'Asset']),\n    }),\n    entitySelectorConfigs: PropTypes.object,\n    allowedHyperlinkTypes: PropTypes.arrayOf(\n      PropTypes.oneOf([LINK_TYPES.ENTRY, LINK_TYPES.ASSET, LINK_TYPES.URI])\n    ),\n    hideText: PropTypes.bool,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    labels: {\n      title: 'Insert link',\n      confirm: 'Insert link',\n    },\n    value: {},\n    hideText: false,\n    entitySelectorConfigs: {},\n    allowedHyperlinkTypes: [LINK_TYPES.ENTRY, LINK_TYPES.ASSET, LINK_TYPES.URI],\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { text, type, uri, target } = props.value;\n    const isEntityLink = Boolean(target);\n    const entityLinks = {\n      [LINK_TYPES.ENTRY]: null,\n      [LINK_TYPES.ASSET]: null,\n    };\n    let linkType = type;\n\n    if (isEntityLink) {\n      linkType = target.sys.linkType;\n      entityLinks[linkType] = target;\n    } else if (props.allowedHyperlinkTypes.includes(LINK_TYPES.URI)) {\n      linkType = LINK_TYPES.URI;\n    } else {\n      linkType = props.allowedHyperlinkTypes[0];\n    }\n\n    this.state = { text, uri, entityLinks, type: linkType };\n  }\n\n  setTargetEntity(type, entity) {\n    this.setState((state) => ({\n      entityLinks: {\n        ...state.entityLinks,\n        [type]: entity ? entityToLink(entity) : undefined,\n      },\n    }));\n  }\n\n  getValue() {\n    const { text, type, uri } = this.state;\n    const value = { type };\n    if (text) {\n      value.text = text;\n    }\n    if (type === LINK_TYPES.URI) {\n      value.uri = uri;\n    } else {\n      value.target = this.state.entityLinks[type];\n    }\n    return value;\n  }\n\n  isLinkComplete() {\n    const { text, type, uri, target } = this.getValue();\n    const requiresText = !this.props.hideText;\n    if (requiresText && !text) {\n      return false;\n    }\n    return (type === LINK_TYPES.URI && uri) || target;\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.props.onClose(this.getValue());\n  };\n\n  selectEntry = async () => {\n    const { locale, contentTypes } = this.props.entitySelectorConfigs.Entry;\n    const entry = await this.props.sdk.dialogs.selectSingleEntry({ locale, contentTypes });\n    this.setTargetEntity(LINK_TYPES.ENTRY, entry);\n  };\n\n  selectAsset = async () => {\n    const { locale } = this.props.entitySelectorConfigs.Asset;\n    const asset = await this.props.sdk.dialogs.selectSingleAsset({ locale });\n    this.setTargetEntity(LINK_TYPES.ASSET, asset);\n  };\n\n  render() {\n    const { labels } = this.props;\n    return (\n      <EntityProvider sdk={this.props.sdk}>\n        <React.Fragment>\n          <Modal.Content>{this.renderFields()}</Modal.Content>\n          <Modal.Controls>\n            <Button\n              type=\"submit\"\n              buttonType=\"positive\"\n              onClick={this.handleSubmit}\n              disabled={!this.isLinkComplete()}\n              testId=\"confirm-cta\">\n              {labels.confirm}\n            </Button>\n            <Button\n              type=\"button\"\n              onClick={() => this.props.onClose(null)}\n              buttonType=\"muted\"\n              testId=\"cancel-cta\">\n              Cancel\n            </Button>\n          </Modal.Controls>\n        </React.Fragment>\n      </EntityProvider>\n    );\n  }\n\n  renderFields() {\n    const { hideText, allowedHyperlinkTypes, entitySelectorConfigs } = this.props;\n    const { uri, text, type } = this.state;\n    const isUriInputAutoFocused = type === LINK_TYPES.URI && (hideText || !!text);\n\n    return (\n      <Form>\n        {hideText ? null : (\n          <TextField\n            required\n            labelText=\"Link text\"\n            value={text || ''}\n            onChange={(e) => this.setState({ text: e.target.value })}\n            id=\"link-text\"\n            name=\"link-text\"\n            textInputProps={{\n              testId: 'link-text-input',\n              autoFocus: !isUriInputAutoFocused,\n            }}\n          />\n        )}\n        {isFeaturingEntitySelector(entitySelectorConfigs) && (\n          <SelectField\n            labelText=\"Link type\"\n            value={type}\n            onChange={(e) => this.setState({ type: e.target.value })}\n            name=\"link-type\"\n            id=\"link-type\"\n            selectProps={{ testId: 'link-type-select' }}>\n            {/* Show the option if the link type is allowed or the current link is of type that is no longer valid */}\n            {allowedHyperlinkTypes.includes(LINK_TYPES.URI) || type === LINK_TYPES.URI ? (\n              <Option value={LINK_TYPES.URI}>URL</Option>\n            ) : null}\n            {allowedHyperlinkTypes.includes(LINK_TYPES.ENTRY) || type === LINK_TYPES.ENTRY ? (\n              <Option value={LINK_TYPES.ENTRY}>Entry</Option>\n            ) : null}\n            {allowedHyperlinkTypes.includes(LINK_TYPES.ASSET) || type === LINK_TYPES.ASSET ? (\n              <Option value={LINK_TYPES.ASSET}>Asset</Option>\n            ) : null}\n          </SelectField>\n        )}\n        {type === LINK_TYPES.URI ? (\n          <TextField\n            required\n            labelText=\"Link target\"\n            value={uri || ''}\n            textInputProps={{\n              placeholder: 'https://',\n              testId: 'link-uri-input',\n              autoFocus: isUriInputAutoFocused,\n            }}\n            helpText=\"A protocol may be required, e.g. https://\"\n            onChange={(e) => this.setState({ uri: e.target.value })}\n            id=\"link-uri\"\n            name=\"link-uri\"\n          />\n        ) : (\n          this.renderEntityField()\n        )}\n      </Form>\n    );\n  }\n\n  renderEntityField() {\n    const { type, entityLinks } = this.state;\n    const resetEntity = () => this.setTargetEntity(type, null);\n    const entityLink = entityLinks[type];\n    const isEntitySelectorVisible = !entityLink;\n    return (\n      <div>\n        <FormLabel required htmlFor=\"\">\n          Link target\n        </FormLabel>\n        {!isEntitySelectorVisible && (\n          <TextLink className={css({ marginLeft: tokens.spacingS })} onClick={resetEntity}>\n            Remove selection\n          </TextLink>\n        )}\n        {entityLink && (\n          <div>\n            {type === LINK_TYPES.ENTRY && (\n              <FetchingWrappedEntryCard\n                sdk={this.props.sdk}\n                locale={this.props.entitySelectorConfigs.Entry.locale}\n                entryId={entityLink.sys.id}\n                isDisabled\n                isSelected={false}\n              />\n            )}\n            {type == LINK_TYPES.ASSET && (\n              <FetchingWrappedAssetCard\n                sdk={this.props.sdk}\n                locale={this.props.entitySelectorConfigs.Asset.locale}\n                assetId={entityLink.sys.id}\n                isDisabled\n                isSelected={false}\n              />\n            )}\n          </div>\n        )}\n        {/* Keep all entity selectors in the DOM for super fast types switching ux.*/}\n        {isEntitySelectorVisible && this.renderEntitySelector(type, isEntitySelectorVisible)}\n      </div>\n    );\n  }\n\n  renderEntitySelector(type) {\n    return (\n      <div className={css({ marginTop: tokens.spacingS })}>\n        {type === LINK_TYPES.ENTRY && <TextLink onClick={this.selectEntry}>Select entry</TextLink>}\n        {type === LINK_TYPES.ASSET && <TextLink onClick={this.selectAsset}>Select asset</TextLink>}\n      </div>\n    );\n  }\n}\n\nexport const openHyperlinkDialog = (\n  dialogs,\n  { value, showTextInput, allowedHyperlinkTypes, entitySelectorConfigs }\n) => {\n  const isNew = !(value.uri || value.target);\n  const props = {\n    labels: {\n      title: isNew ? 'Insert hyperlink' : 'Edit hyperlink',\n      confirm: isNew ? 'Insert' : 'Update',\n    },\n    value,\n    hideText: !showTextInput,\n    allowedHyperlinkTypes,\n    entitySelectorConfigs,\n  };\n\n  return dialogs.openCurrent({\n    title: props.labels.title,\n    width: 'large',\n    shouldCloseOnEscapePress: true,\n    shouldCloseOnOverlayClick: true,\n    allowHeightOverflow: true,\n    parameters: {\n      type: 'rich-text-hyperlink-dialog',\n      ...props,\n    },\n  });\n};\n","/* eslint-disable you-dont-need-lodash-underscore/find */\nimport flow from 'lodash/flow';\nimport find from 'lodash/find';\nimport get from 'lodash/get';\n\n/**\n * Given a field object and a rich text node type, return a list of valid\n * content type IDs associated with the node type, based on that node type's\n * `linkContentType` validation.\n *\n * If there is no such validation or the validation is empty, return an empty\n * array.\n *\n * The navigation here is explained by the `nodes` validation having signature:\n * { nodes: { [nodeType]: validationObject[] } }\n *\n * We defensively navigate through this object because\n * 1) the field may not have a `validations` array,\n * 2) the `validations` array may be empty,\n * 3) the `validations` array may not have a `nodes` validation,\n * 4) the `nodes` validation may not validate the `nodeType`, and\n * 5) the `nodeType` validations may not have a `linkContentType` validation.\n *\n * Note that passing an empty array will result in all possible content types\n * being whitelisted.\n *\n * @param {object} field\n * @param {string} nodeType\n * @returns {string[]}\n */\nexport default (field, nodeType) =>\n  flow(\n    v => find(v, 'nodes'),\n    v => get(v, ['nodes', nodeType]),\n    v => find(v, 'linkContentType'),\n    v => get(v, 'linkContentType', [])\n  )(field.validations);\n","import getLinkedContentTypeIdsForNodeType from './getLinkedContentTypeIdsForNodeType';\n\n/**\n * Returns a config for the entity selector based on a given rich text field and a\n * rich text node type that the entity should be picked for. Takes the field\n * validations for the given node type into account.\n *\n * @param {object} field\n * @param {string} nodeType\n * @returns {object}\n */\nexport default function newEntitySelectorConfigFromRichTextField(field, nodeType) {\n  return {\n    entityType: getEntityTypeFromRichTextNode(nodeType),\n    locale: field.locale || null, // Will fall back to default locale.\n    contentTypes: getLinkedContentTypeIdsForNodeType(field, nodeType)\n  };\n}\n\nfunction getEntityTypeFromRichTextNode(nodeType) {\n  const words = nodeType.split('-');\n  if (words.indexOf('entry') !== -1) {\n    return 'Entry';\n  }\n  if (words.indexOf('asset') !== -1) {\n    return 'Asset';\n  }\n  throw new Error(`RichText node type \\`${nodeType}\\` has no associated \\`entityType\\``);\n}\n","/* eslint-disable you-dont-need-lodash-underscore/find */\nimport find from 'lodash/find';\nimport flow from 'lodash/flow';\nimport get from 'lodash/get';\nimport { BLOCKS, INLINES, TOP_LEVEL_BLOCKS } from '@contentful/rich-text-types';\n\n// TODO: Move this into separate package (maybe rich-text-types) and share with FE.\nexport const VALIDATIONS = {\n  ENABLED_MARKS: 'enabledMarks',\n  ENABLED_NODE_TYPES: 'enabledNodeTypes'\n};\n\nexport const VALIDATABLE_NODE_TYPES = [\n  ...TOP_LEVEL_BLOCKS.filter(type => type !== BLOCKS.PARAGRAPH),\n  ...Object.values(INLINES)\n];\n\nconst getRichTextValidation = (field, validationType) =>\n  flow(\n    v => find(v, validationType),\n    v => get(v, validationType)\n  )(field.validations);\n\nconst isFormattingOptionEnabled = (field, validationType, nodeTypeOrMark) => {\n  const enabledFormattings = getRichTextValidation(field, validationType);\n\n  if (enabledFormattings === undefined) {\n    return true;\n  }\n\n  return enabledFormattings.includes(nodeTypeOrMark);\n};\n\n/**\n * Checks if nodeType is enabled in the Rich Text Editor Field\n *\n * @param {FieldInfo} field\n * @param {string} nodeType\n * @returns {boolean}\n */\nexport const isNodeTypeEnabled = (field, nodeType) =>\n  isFormattingOptionEnabled(field, VALIDATIONS.ENABLED_NODE_TYPES, nodeType);\n\n/**\n * Checks if mark is enabled in the Rich Text Editor Field\n *\n * @param {FieldInfo} field\n * @param {string} mark\n * @returns {boolean}\n */\nexport const isMarkEnabled = (field, mark) =>\n  isFormattingOptionEnabled(field, VALIDATIONS.ENABLED_MARKS, mark);\n","import { BLOCKS, INLINES } from '@contentful/rich-text-types';\nimport { haveInlines } from '../shared/UtilHave';\nimport { openHyperlinkDialog, LINK_TYPES } from '../../dialogs/HypelinkDialog/HyperlinkDialog';\nimport newEntitySelectorConfigFromRichTextField from '../../helpers/newEntitySelectorConfigFromRichTextField';\nimport { isNodeTypeEnabled } from '../../validations/index';\n\nconst { HYPERLINK, ENTRY_HYPERLINK, ASSET_HYPERLINK } = INLINES;\nconst HYPERLINK_TYPES = [HYPERLINK, ENTRY_HYPERLINK, ASSET_HYPERLINK];\n\nconst nodeToHyperlinkType = {\n  [INLINES.ENTRY_HYPERLINK]: LINK_TYPES.ENTRY,\n  [INLINES.ASSET_HYPERLINK]: LINK_TYPES.ASSET,\n  [INLINES.HYPERLINK]: LINK_TYPES.URI,\n};\n\nfunction getAllowedHyperlinkTypes(field) {\n  const hyperlinkTypes = [INLINES.ENTRY_HYPERLINK, INLINES.ASSET_HYPERLINK, INLINES.HYPERLINK];\n  if (field.type === 'RichText') {\n    return hyperlinkTypes\n      .filter((nodeType) => isNodeTypeEnabled(field, nodeType))\n      .map((nodeType) => nodeToHyperlinkType[nodeType]);\n  }\n\n  return hyperlinkTypes.map((nodeType) => nodeToHyperlinkType[nodeType]);\n}\n\nfunction getEntitySelectorConfigs(field) {\n  const config = {};\n\n  // TODO: Don't pass specific key if CT validation prohibits its type:\n  if (isNodeTypeEnabled(field, INLINES.ENTRY_HYPERLINK)) {\n    config.Entry = newEntitySelectorConfigFromRichTextField(field, 'entry-hyperlink');\n  }\n  if (isNodeTypeEnabled(field, INLINES.ASSET_HYPERLINK)) {\n    config.Asset = newEntitySelectorConfigFromRichTextField(field, 'asset-hyperlink');\n  }\n\n  return config;\n}\n\n/**\n * Returns whether or not the current value selection would allow for a user\n * edit on a hyperlink.\n *\n * @param {slate.Value} value\n * @returns {boolean}\n */\nexport function mayEditLink(value) {\n  return !value.isExpanded && hasHyperlink(value);\n}\n\n/**\n * Returns whether the given value has any hyperlink node.\n *\n * @param {slate.Value} value\n * @returns {boolean}\n */\nexport function hasHyperlink(value) {\n  return HYPERLINK_TYPES.some((type) => haveInlines({ value }, type));\n}\n\n/**\n * Returns whether the given value has any inline node other than hyperlinks.\n *\n * @param {slate.Value} value\n * @returns {boolean}\n */\nexport function hasOnlyHyperlinkInlines(value) {\n  return value.inlines.every((inline) => HYPERLINK_TYPES.includes(inline.type));\n}\n\n/**\n * Allows the user to insert/remove a link depending on whether the current\n * selection has a link or not. If there is no link, a dialog is shown for\n * the user.\n *\n * @param {slate.Editor} editor Will be mutated with the required operations.\n * @param {Object} sdk\n * @param {function} logAction\n * @returns {Promise<void>}\n */\nexport async function toggleLink(editor, sdk, logAction) {\n  if (hasHyperlink(editor.value)) {\n    removeLinks(editor, logAction);\n  } else {\n    await insertLink(editor, sdk, logAction);\n  }\n}\n\nasync function insertLink(change, sdk, logAction) {\n  change.blur(); // Ensures modal input auto-focus will work.\n\n  logAction('openCreateHyperlinkDialog');\n  const showTextInput = !change.value.isExpanded || change.value.fragment.text.trim() === '';\n\n  const result = await openHyperlinkDialog(sdk.dialogs, {\n    showTextInput,\n    value: { text: change.value.fragment.text || '' },\n    allowedHyperlinkTypes: getAllowedHyperlinkTypes(sdk.field),\n    entitySelectorConfigs: getEntitySelectorConfigs(sdk.field),\n  });\n\n  if (!result) {\n    logAction('cancelCreateHyperlinkDialog');\n    change.focus();\n    return;\n  }\n  const { text, type: linkType, uri, target } = result;\n  if (showTextInput) {\n    if (change.isVoid(change.value.blocks.last())) {\n      change.insertBlock(BLOCKS.PARAGRAPH);\n    }\n    change.insertText(text).moveFocusForward(0 - text.length);\n  }\n  const data = target ? { target } : { uri };\n  change.call(wrapLink, linkType, data);\n  const nodeType = linkTypeToNodeType(linkType);\n  logAction('insert', { nodeType, linkType });\n\n  change.focus();\n}\n\nfunction removeLinks(change, logAction) {\n  HYPERLINK_TYPES.forEach((type) => change.unwrapInline(type));\n  change.focus();\n  logAction('unlinkHyperlinks');\n}\n\n/**\n * Allows the user to edit the first selected link of a given Change by showing\n * a dialog and applying the change.\n *\n * @param {slate.Editor} change Will be mutated with the required operations.\n * @param {Object} sdk\n * @param {function} logAction\n * @returns {Promise<void>}\n */\nexport async function editLink(change, sdk, logAction) {\n  const link = change.value.inlines.get(0);\n  if (!link) {\n    throw new Error('Change object contains no link to be edited.');\n  }\n  change.blur(); // Ensures modal input auto-focus will work.\n  logAction('openEditHyperlinkDialog');\n  const { uri: oldUri, target: oldTarget } = link.data.toJSON();\n  const result = await openHyperlinkDialog(sdk.dialogs, {\n    showTextInput: false,\n    value: oldTarget ? { target: oldTarget } : { uri: oldUri },\n    allowedHyperlinkTypes: getAllowedHyperlinkTypes(sdk.field),\n    entitySelectorConfigs: getEntitySelectorConfigs(sdk.field),\n  });\n  if (!result) {\n    logAction('cancelEditHyperlinkDialog');\n    change.focus();\n    return;\n  }\n\n  const { type: linkType, uri, target } = result;\n  const nodeType = linkTypeToNodeType(linkType);\n  const data = target ? { target } : { uri };\n  change.setInlines({ type: nodeType, data });\n  logAction('edit', { nodeType, linkType });\n  change.focus();\n}\n\nfunction wrapLink(change, linkType, data) {\n  change.wrapInline({\n    type: linkTypeToNodeType(linkType),\n    data,\n  });\n  change.moveToEnd();\n}\n\nfunction linkTypeToNodeType(linkType) {\n  switch (linkType) {\n    case 'Entry':\n      return ENTRY_HYPERLINK;\n    case 'Asset':\n      return ASSET_HYPERLINK;\n  }\n  return HYPERLINK;\n}\n","import React, { Component } from 'react';\nimport { INLINES } from '@contentful/rich-text-types';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport { TOOLBAR_PLUGIN_PROP_TYPES } from '../shared/PluginApi';\nimport { toolbarActionHandlerWithSafeAutoFocus } from '../shared/Util';\nimport { hasHyperlink, toggleLink, hasOnlyHyperlinkInlines } from './Util';\n\nexport default class HyperlinkToolbarIcon extends Component {\n  static propTypes = TOOLBAR_PLUGIN_PROP_TYPES;\n\n  handleClick = toolbarActionHandlerWithSafeAutoFocus(this, async () => {\n    const {\n      onToggle,\n      editor,\n      richTextAPI: { sdk, logToolbarAction },\n    } = this.props;\n    await toggleLink(editor, sdk, logToolbarAction);\n    onToggle(editor);\n  });\n\n  render() {\n    const { disabled, editor } = this.props;\n    const isDisabled = disabled || !hasOnlyHyperlinkInlines(editor.value);\n    return (\n      <ToolbarIcon\n        disabled={isDisabled}\n        type={INLINES.HYPERLINK}\n        icon=\"Link\"\n        title=\"Hyperlink\"\n        onToggle={this.handleClick}\n        isActive={hasHyperlink(editor.value)}\n      />\n    );\n  }\n}\n","import { css } from 'emotion';\nimport tokens from '@contentful/forma-36-tokens';\n\nexport const hyperlinkTooltipStyles = {\n  entityContentType: css({\n    color: tokens.colorTextLightest,\n    marginRight: tokens.spacingXs,\n    '&:after': {\n      content: '\"\"'\n    }\n  }),\n  entityTitle: css({\n    marginRight: tokens.spacingXs\n  }),\n  separator: css({\n    background: tokens.colorTextMid,\n    margin: tokens.spacingXs\n  })\n};\n\nexport default {\n  hyperlinkWrapper: css({\n    display: 'inline',\n    position: 'static',\n    a: {\n      fontSize: 'inherit !important'\n    }\n  }),\n  hyperlink: css({\n    fontSize: 'inherit !important',\n    display: 'inline !important',\n    '&:hover': {\n      fill: tokens.textColorDark\n    },\n    '&:focus': {\n      fill: tokens.textColorDark\n    }\n  }),\n  hyperlinkIEFallback: css({\n    color: '#1683d0',\n    textDecoration: 'underline'\n  }),\n  // TODO: use these styles once we can use the icon\n  hyperlinkIcon: css({\n    position: 'relative',\n    top: '4px',\n    height: '14px',\n    margin: '0 -2px 0 -1px',\n    webkitTransition: 'fill 100ms ease-in-out',\n    transition: 'fill 100ms ease-in-out',\n    '&:hover': {\n      fill: tokens.textColorDark\n    },\n    '&:focus': {\n      fill: tokens.textColorDark\n    }\n  })\n};\n","import { detect as detectBrowser } from 'detect-browser';\n\nconst browser = detectBrowser();\nconst isEdge = !!browser && browser.name === 'ie';\n\n// TODO: Test whether this is still relevant with latest Edge or at least do\n//  so after upgrading Slate.js to see if still relevant at all.\nexport const SUPPORTS_NATIVE_SLATE_HYPERLINKS = !isEdge;\n","export function truncate(str, length) {\n  if (str && str.length > length) {\n    return (\n      str &&\n      str\n        .substr(0, length + 1) // +1 to look ahead and be replaced below.\n        // Get rid of orphan letters but not one letter words (I, a, 2).\n        // Try to not have “.” as last character to avoid awkward “....”.\n        .replace(/(\\s+\\S(?=\\S)|\\s*)\\.?.$/, '…')\n    );\n  } else {\n    return str;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { hyperlinkTooltipStyles as styles } from './styles';\nimport { Tag } from '@contentful/forma-36-react-components';\nimport { ScheduleTooltipContent } from '@contentful/field-editor-reference';\nimport { entityHelpers } from '@contentful/field-editor-shared';\nimport { truncate } from './truncate';\n\nasync function fetchAllData({ sdk, entityId, entityType, localeCode, defaultLocaleCode }) {\n  let contentType;\n\n  const getEntity = entityType === 'Entry' ? sdk.space.getEntry : sdk.space.getAsset;\n  const entity = await getEntity(entityId);\n  if (entity.sys.contentType) {\n    const contentTypeId = entity.sys.contentType.sys.id;\n    contentType = await sdk.space.getContentType(contentTypeId);\n  }\n\n  const entityTitle =\n    entityType === 'Entry'\n      ? entityHelpers.getEntryTitle({\n          entry: entity,\n          contentType,\n          localeCode,\n          defaultLocaleCode,\n          defaultTitle: 'Untitled'\n        })\n      : entityHelpers.getAssetTitle({\n          asset: entity,\n          localeCode,\n          defaultLocaleCode,\n          defaultTitle: 'Untitled'\n        });\n\n  const entityDescription = entityHelpers.getEntityDescription({\n    entity,\n    contentType,\n    localeCode,\n    defaultLocaleCode\n  });\n\n  const jobs = await sdk.space.getEntityScheduledActions(entityType, entityId);\n\n  const entityStatus = entityHelpers.getEntryStatus(entity.sys);\n\n  return {\n    jobs,\n    entity,\n    entityTitle,\n    entityDescription,\n    entityStatus,\n    contentTypeName: contentType ? contentType.name : ''\n  };\n}\n\n// eslint-disable-next-line react/prop-types\nfunction renderEntityInfo({ entityTitle, entityStatus, contentTypeName }) {\n  const title = truncate(entityTitle, 60) || 'Untitled';\n  return (\n    <div>\n      <span className={styles.entityContentType}>{contentTypeName || 'Asset'}</span>\n      <span className={styles.entityTitle}>{title}</span>\n      <EntityStatusTag statusLabel={entityStatus} />\n    </div>\n  );\n}\n\nfunction EntityStatusTag({ className, statusLabel }) {\n  const tagTypeMap = {\n    published: 'positive',\n    draft: 'warning',\n    archived: 'negative',\n    changed: 'primary'\n  };\n  return (\n    <Tag className={className} tagType={tagTypeMap[statusLabel]}>\n      {statusLabel}\n    </Tag>\n  );\n}\n\nEntityStatusTag.propTypes = {\n  className: PropTypes.string,\n  statusLabel: PropTypes.string.isRequired\n};\n\nexport function EntityHyperlinkTooltip(props) {\n  const { sdk } = props.richTextAPI;\n  const { target } = props;\n\n  const [requestStatus, setRequestStatus] = React.useState({ type: 'loading' });\n\n  React.useEffect(() => {\n    fetchAllData({\n      sdk,\n      entityId: target.sys.id,\n      entityType: target.sys.linkType,\n      localeCode: sdk.field.locale,\n      defaultLocaleCode: sdk.locales.default\n    })\n      .then(entityInfo => {\n        setRequestStatus({ type: 'success', data: entityInfo });\n      })\n      .catch(e => {\n        console.log(e);\n        setRequestStatus({ type: 'error', error: e });\n      });\n  }, []); // eslint-disable-line\n\n  if (requestStatus.type === 'loading') {\n    return `Loading ${target.sys.linkType.toLowerCase()}...`;\n  }\n  let tooltip = '';\n  if (requestStatus.type === 'error') {\n    tooltip = `${target.sys.linkType} missing or inaccessible`;\n  } else {\n    const { jobs, ...entityInfo } = requestStatus.data;\n    tooltip = (\n      <>\n        {renderEntityInfo(entityInfo)}\n        {jobs.length > 0 ? (\n          <>\n            <hr className={styles.separator} />\n            <ScheduleTooltipContent job={jobs[0]} jobsCount={jobs.length} />\n          </>\n        ) : null}\n      </>\n    );\n  }\n  return tooltip;\n}\n","import React from 'react';\nimport { Tooltip, TextLink } from '@contentful/forma-36-react-components';\nimport PropTypes from 'prop-types';\nimport { cx } from 'emotion';\nimport noop from 'lodash/noop';\nimport isHotKey from 'is-hotkey';\nimport styles from './styles';\nimport { SUPPORTS_NATIVE_SLATE_HYPERLINKS } from '../../helpers/browserSupport';\nimport { EntityHyperlinkTooltip } from './EntityHyperlinkTootip';\n\nexport default class Hyperlink extends React.Component {\n  static propTypes = {\n    attributes: PropTypes.object.isRequired,\n    node: PropTypes.object.isRequired,\n    children: PropTypes.node,\n    editor: PropTypes.object,\n    richTextAPI: PropTypes.object.isRequired,\n    onEdit: PropTypes.func\n  };\n\n  static defaultProps = {\n    onEdit: noop\n  };\n\n  onKeyDown(e) {\n    if (isHotKey('enter', e)) {\n      e.preventDefault();\n      e.stopPropagation(); // Ensure Slate doesn't interpret as new paragraph.\n      this.props.onEdit(e);\n    }\n  }\n\n  render() {\n    const { node } = this.props;\n    const uri = node.data.get('uri');\n    const target = node.data.get('target');\n\n    return (\n      <span\n        {...this.props.attributes}\n        onClick={this.props.onEdit}\n        onKeyDown={e => this.onKeyDown(e)}\n        role=\"button\"\n        tabIndex={0}>\n        {target ? this.renderEntityLink(target) : this.renderLink({ tooltip: uri })}\n      </span>\n      // TODO: Add contentEditable={false} to tooltip to fix text cursor bug\n    );\n  }\n\n  renderLink({ tooltip }) {\n    const { children, node } = this.props;\n    const title = node.data.get('title');\n    const uri = node.data.get('uri');\n    const href = isUrl(uri) ? uri : 'javascript:void(0)';\n    return (\n      <Tooltip\n        content={tooltip}\n        className={styles.tooltipContainer}\n        targetWrapperClassName={styles.hyperlinkWrapper}\n        place=\"bottom\"\n        maxWidth=\"auto\">\n        {SUPPORTS_NATIVE_SLATE_HYPERLINKS ? (\n          <TextLink\n            href={href} // Allows user to open uri link in new tab.\n            rel=\"noopener noreferrer\"\n            title={title}\n            className={styles.hyperlink}>\n            {children}\n          </TextLink>\n        ) : (\n          <span className={cx(styles.hyperlink, styles.hyperlinkIEFallback)}>{children}</span>\n        )}\n      </Tooltip>\n    );\n  }\n\n  renderEntityLink(target) {\n    const tooltip = <EntityHyperlinkTooltip richTextAPI={this.props.richTextAPI} target={target} />;\n    return this.renderLink({ tooltip });\n  }\n}\n\nfunction isUrl(string) {\n  return /^(?:[a-z]+:)?\\/\\//i.test(string) || /^mailto:/i.test(string);\n}\n","import React from 'react';\nimport isHotkey from 'is-hotkey';\nimport { INLINES } from '@contentful/rich-text-types';\nimport ToolbarIcon from './ToolbarIcon';\nimport Hyperlink from './Hyperlink';\nimport { editLink, mayEditLink, toggleLink, hasOnlyHyperlinkInlines } from './Util';\n\nconst { HYPERLINK, ENTRY_HYPERLINK, ASSET_HYPERLINK } = INLINES;\n\nexport default ToolbarIcon;\n\nexport const HyperlinkPlugin = ({ richTextAPI }) => ({\n  renderNode: (props, _editor, next) => {\n    const { sdk, logViewportAction } = richTextAPI;\n    const { node, editor } = props;\n    if (isHyperlink(node.type)) {\n      return (\n        <Hyperlink\n          {...props}\n          richTextAPI={richTextAPI}\n          onEdit={event => {\n            event.preventDefault(); // Don't follow `href`\n\n            editor.moveToRangeOfNode(node).focus();\n            if (mayEditLink(editor.value)) {\n              editLink(editor, sdk, logViewportAction);\n            }\n          }}\n        />\n      );\n    }\n    return next();\n  },\n  onKeyDown: (event, editor, next) => {\n    const { sdk, logShortcutAction } = richTextAPI;\n    const hotkey = ['mod+k'];\n\n    if (isHotkey(hotkey, event) && hasOnlyHyperlinkInlines(editor.value)) {\n      if (mayEditLink(editor.value)) {\n        editLink(editor, sdk, logShortcutAction);\n      } else {\n        toggleLink(editor, sdk, logShortcutAction);\n      }\n      return;\n    }\n\n    return next();\n  },\n  normalizeNode: (node, editor, next) => {\n    if (isHyperlink(node.type) && node.getInlines().size > 0) {\n      return () => {\n        node\n          .getInlines()\n          .forEach(inlineNode => editor.unwrapInlineByKey(inlineNode.key, node.type));\n      };\n    }\n    next();\n  }\n});\n\nfunction isHyperlink(type) {\n  return [HYPERLINK, ENTRY_HYPERLINK, ASSET_HYPERLINK].includes(type);\n}\n","import React, { Component } from 'react';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport markPlugin from '../shared/MarkPlugin';\nimport markToggleDecorator from '../shared/MarkToggleDecorator';\nimport { MARKS } from '@contentful/rich-text-types';\n\nexport const SubscriptPlugin = ({ richTextAPI }) => {\n  return markPlugin({\n    type: MARKS.SUBSCRIPT,\n    tagName: 'sub',\n    hotkey: ['mod+~'],\n    richTextAPI\n  });\n};\n\nclass Subscript extends Component {\n  render() {\n    return <ToolbarIcon {...this.props} />;\n  }\n}\n\nexport default markToggleDecorator({\n  type: MARKS.SUBSCRIPT,\n  title: 'Subscript',\n  icon: 'FormatItalic'\n})(Subscript);\n","import React, { Component } from 'react';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport markPlugin from '../shared/MarkPlugin';\nimport markToggleDecorator from '../shared/MarkToggleDecorator';\nimport { MARKS } from '@contentful/rich-text-types';\n\nexport const SuperscriptPlugin = ({ richTextAPI }) => {\n  return markPlugin({\n    type: MARKS.SUPERSCRIPT,\n    tagName: 'sup',\n    hotkey: ['mod+^'],\n    richTextAPI\n  });\n};\n\nclass Superscript extends Component {\n  render() {\n    return <ToolbarIcon {...this.props} />;\n  }\n}\n\nexport default markToggleDecorator({\n  type: MARKS.SUPERSCRIPT,\n  title: 'Superscript',\n  icon: 'FormatItalic'\n})(Superscript);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownListItem } from '@contentful/forma-36-react-components';\nimport { css, cx } from 'emotion';\nimport tokens from '@contentful/forma-36-tokens';\n\nconst styles = {\n  root: css({\n    button: {\n      span: {\n        fontWeight: tokens.fontWeightDemiBold,\n      },\n    },\n  }),\n  h1: css({\n    button: {\n      span: {\n        fontSize: '1.625rem',\n      },\n    },\n  }),\n  h2: css({\n    button: {\n      span: {\n        fontSize: '1.4375rem',\n      },\n    },\n  }),\n  h3: css({\n    button: {\n      span: {\n        fontSize: '1.25rem',\n      },\n    },\n  }),\n  h4: css({\n    button: {\n      span: {\n        fontSize: '1.125rem',\n      },\n    },\n  }),\n  h5: css({\n    button: {\n      span: {\n        fontSize: '1rem',\n      },\n    },\n  }),\n  h6: css({\n    button: {\n      span: {\n        fontSize: '0.875rem',\n      },\n    },\n  }),\n};\n\n// Necessary because we can't use kebab-case for style identifiers.\nconst getStyleForType = (type) => type.replace('heading-', 'h');\n\nexport default class ToolbarDropdownListItem extends Component {\n  static propTypes = {\n    isActive: PropTypes.bool.isRequired,\n    onToggle: PropTypes.func.isRequired,\n    title: PropTypes.string.isRequired,\n    type: PropTypes.string,\n    children: PropTypes.node,\n  };\n\n  handleClick = (event) => {\n    /*\n      We're using the mousedown event rather than onclick because onclick will\n      steal the focus.\n    */\n\n    event.preventDefault();\n    this.props.onToggle(event);\n  };\n\n  render() {\n    const { isActive, title, type, children } = this.props;\n    return (\n      <DropdownListItem\n        label={title}\n        isActive={isActive}\n        data-test-id={`toolbar-toggle-${type}`}\n        className={cx(styles.root, styles[getStyleForType(type)])}\n        onClick={this.handleClick}>\n        {children}\n      </DropdownListItem>\n    );\n  }\n}\n","import * as React from 'react';\nimport { haveBlocks } from './UtilHave';\nimport { toolbarActionHandlerWithSafeAutoFocus } from './Util';\nimport { TOOLBAR_PLUGIN_PROP_TYPES } from './PluginApi';\n\nexport default ({ type, title, icon, applyChange = (editor, type) => editor.setBlocks(type) }) => (\n  Block\n) => {\n  return class BlockSelectDecorator extends React.Component {\n    static propTypes = TOOLBAR_PLUGIN_PROP_TYPES;\n\n    handleSelect = toolbarActionHandlerWithSafeAutoFocus(this, () => {\n      const {\n        editor,\n        onToggle,\n        richTextAPI: { logToolbarAction },\n      } = this.props;\n      applyChange(editor, type);\n      onToggle(editor);\n      logToolbarAction('insert', { nodeType: type });\n    });\n\n    render() {\n      const { editor, disabled } = this.props;\n\n      return (\n        <Block\n          type={type}\n          icon={icon}\n          title={title}\n          onToggle={this.handleSelect}\n          isActive={haveBlocks(editor, type)}\n          disabled={disabled}\n        />\n      );\n    }\n  };\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport { Dropdown, DropdownList, Button } from '@contentful/forma-36-react-components';\nimport tokens from '@contentful/forma-36-tokens';\nimport { css } from 'emotion';\n\nconst styles = {\n  root: css({\n    width: '110px',\n\n    [`@media (min-width: ${tokens.contentWidthDefault})`]: {\n      width: '145px',\n    },\n\n    svg: {\n      marginLeft: 'auto',\n    },\n\n    '> span': {\n      padding: '0 2px!important',\n    },\n  }),\n};\n\nexport const blockTitles = {\n  [BLOCKS.HEADING_1]: 'Heading 1',\n  [BLOCKS.HEADING_2]: 'Heading 2',\n  [BLOCKS.HEADING_3]: 'Heading 3',\n  [BLOCKS.HEADING_4]: 'Heading 4',\n  [BLOCKS.HEADING_5]: 'Heading 5',\n  [BLOCKS.HEADING_6]: 'Heading 6',\n  [BLOCKS.PARAGRAPH]: 'Normal Text',\n  [BLOCKS.EMBEDDED_ENTRY]: 'Embedded Entry',\n  [BLOCKS.EMBEDDED_ASSET]: 'Embedded Asset',\n};\n\nclass HeadingDropdown extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    isOpen: PropTypes.bool,\n    disabled: PropTypes.bool,\n    onClose: PropTypes.func,\n    onToggle: PropTypes.func,\n    currentBlockType: PropTypes.string,\n  };\n  getStyleNameForChange = () => {\n    return blockTitles[this.props.currentBlockType] || blockTitles[BLOCKS.PARAGRAPH];\n  };\n\n  render() {\n    const { onToggle, isOpen, onClose, children } = this.props;\n    return (\n      <Dropdown\n        toggleElement={\n          <Button\n            onClick={onToggle}\n            data-test-id=\"toolbar-heading-toggle\"\n            className={styles.root}\n            indicateDropdown\n            buttonType=\"naked\"\n            size=\"small\"\n            disabled={this.props.disabled}>\n            {this.getStyleNameForChange()}\n          </Button>\n        }\n        isOpen={isOpen}\n        onClose={onClose}>\n        <DropdownList className=\"toolbar-heading-dropdown-list\">{children}</DropdownList>\n      </Dropdown>\n    );\n  }\n}\n\nexport default HeadingDropdown;\n","import React, { Component } from 'react';\nimport ToolbarDropdownListItem from '../shared/ToolbarDropdownListItem';\nimport blockSelectDecorator from '../shared/BlockSelectDecorator';\nimport { blockTitles } from './HeadingDropdown';\n\nexport default function newHeadingDropdownItem(nodeType) {\n  const title = blockTitles[nodeType];\n\n  class Heading extends Component {\n    static displayName = title.replace(/\\s/g, '');\n    render() {\n      return (\n        <ToolbarDropdownListItem {...this.props} data-test-id={nodeType}>\n          {title}\n        </ToolbarDropdownListItem>\n      );\n    }\n  }\n\n  return blockSelectDecorator({\n    type: nodeType,\n    title,\n  })(Heading);\n}\n","import React, { Component } from 'react';\nimport ToolbarDropdownListItem from '../shared/ToolbarDropdownListItem';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport blockSelectDecorator from '../shared/BlockSelectDecorator';\nimport { blockTitles } from './HeadingDropdown';\n\nclass Paragraph extends Component {\n  render() {\n    return (\n      <ToolbarDropdownListItem {...this.props}>\n        {blockTitles[BLOCKS.PARAGRAPH]}\n      </ToolbarDropdownListItem>\n    );\n  }\n}\n\nexport default blockSelectDecorator({\n  type: BLOCKS.PARAGRAPH,\n  title: blockTitles[BLOCKS.PARAGRAPH],\n  shouldToggle: false\n})(Paragraph);\n","import isHotkey from 'is-hotkey';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport { toggleChange } from '../shared/BlockToggleDecorator';\nimport CommonNode from '../shared/NodeDecorator';\nimport newHeadingDropdownItem from './HeadingDropdownItem';\n\nconst newPlugin = (defaultType, tagName, hotkey) => ({ type = defaultType, richTextAPI }) => ({\n  renderNode: (props, _editor, next) => {\n    if (props.node.type === type) {\n      return CommonNode(tagName, {})(props);\n    }\n    return next();\n  },\n  onKeyDown: (e, editor, next) => {\n    if (isHotkey('enter', e)) {\n      const currentBlock = editor.value.blocks.get(0);\n      if (currentBlock.type === type) {\n        const { value } = editor;\n\n        if (value.selection.start.offset === 0) {\n          const initialRange = value.selection;\n          editor.splitBlock().setBlocksAtRange(initialRange, BLOCKS.PARAGRAPH);\n        } else {\n          editor.splitBlock().setBlocks(BLOCKS.PARAGRAPH);\n        }\n\n        return;\n      }\n    } else if (isHotkey(hotkey, e)) {\n      const isActive = toggleChange(editor, type);\n      const actionName = isActive ? 'insert' : 'remove';\n      richTextAPI.logShortcutAction(actionName, { nodeType: type });\n      return;\n    }\n    return next();\n  },\n});\n\n// TODO: move hotkeys to components\nexport const Heading1Plugin = newPlugin(BLOCKS.HEADING_1, 'h1', ['mod+opt+1']);\nexport const Heading2Plugin = newPlugin(BLOCKS.HEADING_2, 'h2', ['mod+opt+2']);\nexport const Heading3Plugin = newPlugin(BLOCKS.HEADING_3, 'h3', ['mod+opt+3']);\nexport const Heading4Plugin = newPlugin(BLOCKS.HEADING_4, 'h4', ['mod+opt+4']);\nexport const Heading5Plugin = newPlugin(BLOCKS.HEADING_5, 'h5', ['mod+opt+5']);\nexport const Heading6Plugin = newPlugin(BLOCKS.HEADING_6, 'h6', ['mod+opt+6']);\n\nexport const Heading1 = newHeadingDropdownItem(BLOCKS.HEADING_1);\nexport const Heading2 = newHeadingDropdownItem(BLOCKS.HEADING_2);\nexport const Heading3 = newHeadingDropdownItem(BLOCKS.HEADING_3);\nexport const Heading4 = newHeadingDropdownItem(BLOCKS.HEADING_4);\nexport const Heading5 = newHeadingDropdownItem(BLOCKS.HEADING_5);\nexport const Heading6 = newHeadingDropdownItem(BLOCKS.HEADING_6);\nexport { default as Paragraph } from './Paragraph';\nexport { default as HeadingDropdown } from './HeadingDropdown';\n","import isHotkey from 'is-hotkey';\n\nexport default function() {\n  return {\n    onKeyDown(event, editor, next) {\n      if (isHotkey('shift+enter', event)) {\n        editor.insertText('\\n');\n        return;\n      }\n      return next();\n    }\n  };\n}\n","import isHotkey from 'is-hotkey';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport { toggleChange } from '../shared/BlockToggleDecorator';\nimport CommonNode from '../shared/NodeDecorator';\n\nconst plugin = (type, tagName, tagProps, hotkey) => {\n  return {\n    renderNode: (props, _editor, next) => {\n      if (props.node.type === type) {\n        return CommonNode(tagName, tagProps)(props);\n      }\n      return next();\n    },\n    onKeyDown: (e, editor, next) => {\n      if (isHotkey(hotkey, e)) {\n        editor.call(toggleChange, type);\n        return;\n      }\n      return next();\n    }\n  };\n};\n\n// TODO: move hotkeys to components\nexport const ParagraphPlugin = (type = BLOCKS.PARAGRAPH) =>\n  // Can't use <p/> as for e.g. links we need to show a tooltip inside.\n  plugin(type, 'div', {}, ['mod+opt+0']);\n","import { BLOCKS } from '@contentful/rich-text-types';\nimport { haveTextInSomeBlocks } from '../shared/UtilHave';\nimport newEntitySelectorConfigFromRichTextField from '../../helpers/newEntitySelectorConfigFromRichTextField';\n\n/**\n * Returns whether given value has a block of the given type.\n * @param {slate.Editor} editor\n * @param {string} type\n * @returns {boolean}\n */\nexport const hasBlockOfType = (editor, type) => {\n  const blocks = editor.value.blocks;\n  return blocks.get(0).type === type;\n};\n\n/**\n * Invokes entity selector modal and inserts block embed.\n * @param {string} nodeType\n * @param {import('@contentful/field-editor-reference/dist/types').FieldExtensionSDK} sdk\n * @param {slate.Editor} editor\n * @param {function} logAction\n */\nexport async function selectEntityAndInsert(nodeType, sdk, editor, logAction) {\n  logAction('openCreateEmbedDialog', { nodeType });\n\n  const { field, dialogs } = sdk;\n  const baseConfig = newEntitySelectorConfigFromRichTextField(field, nodeType);\n  const selectEntity =\n    baseConfig.entityType === 'Asset' ? dialogs.selectSingleAsset : dialogs.selectSingleEntry;\n  const config = { ...baseConfig, withCreate: true };\n  try {\n    const entity = await selectEntity(config);\n    if (!entity) {\n      return;\n    }\n    insertBlock(editor, nodeType, entity);\n    logAction('insert', { nodeType });\n  } catch (error) {\n    if (error) {\n      throw error;\n    } else {\n      logAction('cancelCreateEmbedDialog', { nodeType });\n    }\n  }\n}\n\nexport const createNode = (nodeType, entity) => ({\n  type: nodeType,\n  object: 'block',\n  data: {\n    target: {\n      sys: {\n        id: entity.sys.id,\n        type: 'Link',\n        linkType: entity.sys.type\n      }\n    }\n  }\n});\n\nexport function insertBlock(editor, nodeType, entity, focusNextLine = true) {\n  const linkedEntityBlock = createNode(nodeType, entity);\n  if (editor.value.blocks.size === 0 || haveTextInSomeBlocks(editor)) {\n    editor.insertBlock(linkedEntityBlock);\n  } else {\n    editor.setBlocks(linkedEntityBlock);\n  }\n\n  if (focusNextLine) {\n    editor.insertBlock(BLOCKS.PARAGRAPH).focus();\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownListItem, Button, Icon } from '@contentful/forma-36-react-components';\n\nimport { selectEntityAndInsert } from './Util';\nimport { TOOLBAR_PLUGIN_PROP_TYPES } from '../shared/PluginApi';\nimport { toolbarActionHandlerWithSafeAutoFocus } from '../shared/Util';\n\nexport default class EntityLinkToolbarIcon extends Component {\n  static propTypes = {\n    ...TOOLBAR_PLUGIN_PROP_TYPES,\n    isButton: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    isButton: false,\n  };\n\n  handleClick = (e) => {\n    this.props.onCloseEmbedMenu();\n    this.handleAction(e);\n  };\n\n  handleAction = toolbarActionHandlerWithSafeAutoFocus(this, async () => {\n    const {\n      editor,\n      nodeType,\n      richTextAPI: { sdk, logToolbarAction },\n    } = this.props;\n    await selectEntityAndInsert(nodeType, sdk, editor, logToolbarAction);\n    this.props.onToggle(editor);\n  });\n\n  render() {\n    const { nodeType } = this.props;\n    const type = getEntityTypeFromNodeType(nodeType);\n    const baseClass = `rich-text__${nodeType}`;\n    return this.props.isButton ? (\n      <Button\n        disabled={this.props.disabled}\n        className={`${baseClass}-button`}\n        size=\"small\"\n        onClick={this.handleClick}\n        icon={type === 'Asset' ? 'Asset' : 'EmbeddedEntryBlock'}\n        buttonType=\"muted\"\n        testId={`toolbar-toggle-${nodeType}`}>\n        {`Embed ${type.toLowerCase()}`}\n      </Button>\n    ) : (\n      <DropdownListItem\n        isDisabled={this.props.disabled}\n        className={`${baseClass}-list-item`}\n        size=\"small\"\n        onClick={this.handleClick}\n        testId={`toolbar-toggle-${nodeType}`}>\n        <div className=\"cf-flex-grid\">\n          <Icon\n            icon={type === 'Asset' ? 'Asset' : 'EmbeddedEntryBlock'}\n            className=\"rich-text__embedded-entry-list-icon\"\n            color=\"secondary\"\n          />\n          {type}\n        </div>\n      </DropdownListItem>\n    );\n  }\n}\n\n/**\n * Returns the entity type depending on the given node type.\n * @param {string} nodeType\n * @returns {string}\n */\nfunction getEntityTypeFromNodeType(nodeType) {\n  const words = nodeType.toLowerCase().split('-');\n  if (words.includes('entry')) {\n    return 'Entry';\n  }\n  if (words.includes('asset')) {\n    return 'Asset';\n  }\n  throw new Error(`Node type \\`${nodeType}\\` has no associated \\`entityType\\``);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from 'emotion';\nimport { FetchingWrappedEntryCard } from './FetchingWrappedEntryCard';\nimport { FetchingWrappedAssetCard } from './FetchingWrappedAssetCard';\n\nconst styles = {\n  root: css({\n    marginBottom: '1.25rem'\n  })\n};\n\nexport default class LinkedEntityBlock extends React.Component {\n  static propTypes = {\n    sdk: PropTypes.object.isRequired,\n    isSelected: PropTypes.bool.isRequired,\n    attributes: PropTypes.object.isRequired,\n    editor: PropTypes.object.isRequired,\n    node: PropTypes.object.isRequired,\n    onEntityFetchComplete: PropTypes.func.isRequired\n  };\n\n  getEntitySys() {\n    const data = this.props.node.data;\n    return {\n      id: data.get('target').sys.id,\n      type: data.get('target').sys.linkType\n    };\n  }\n\n  handleEditClick = () => {\n    const { type, id } = this.getEntitySys();\n    const { navigator } = this.props.sdk;\n    const openEntity = type === 'Asset' ? navigator.openAsset : navigator.openEntry;\n    return openEntity(id, { slideIn: true });\n  };\n\n  handleRemoveClick = () => {\n    const { editor, node } = this.props;\n    editor.moveToRangeOfNode(node);\n    editor.removeNodeByKey(node.key);\n    editor.focus(); // Click on \"x\" might have removed focus.\n  };\n\n  render() {\n    const { sdk, editor, isSelected } = this.props;\n    const isDisabled = editor.props.readOnly || editor.props.actionsDisabled;\n    const { id: entityId, type: entityType } = this.getEntitySys();\n    return (\n      <div {...this.props.attributes} className={styles.root}>\n        {entityType === 'Entry' && (\n          <FetchingWrappedEntryCard\n            sdk={sdk}\n            entryId={entityId}\n            locale={sdk.field.locale}\n            isDisabled={isDisabled}\n            isSelected={isSelected}\n            onRemove={this.handleRemoveClick}\n            onEdit={this.handleEditClick}\n            getEntryUrl={() => {\n              const getEntryUrl = sdk.parameters.instance.getEntryUrl;\n              return typeof getEntryUrl === 'function' ? getEntryUrl(entityId) : '';\n            }}\n            onEntityFetchComplete={this.props.onEntityFetchComplete}\n          />\n        )}\n        {entityType === 'Asset' && (\n          <FetchingWrappedAssetCard\n            sdk={sdk}\n            assetId={entityId}\n            locale={sdk.field.locale}\n            isDisabled={isDisabled}\n            isSelected={isSelected}\n            onRemove={this.handleRemoveClick}\n            onEdit={this.handleEditClick}\n            getAssetUrl={() => {\n              const getAssetUrl = sdk.parameters.instance.getAssetUrl;\n              return typeof getAssetUrl === 'function' ? getAssetUrl(entityId) : '';\n            }}\n            onEntityFetchComplete={this.props.onEntityFetchComplete}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport isHotkey from 'is-hotkey';\n\nimport ToolbarIcon from './ToolbarIcon';\nimport EntityLinkBlock from './EmbeddedEntityBlock';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport { hasBlockOfType, selectEntityAndInsert } from './Util';\n\nexport default ToolbarIcon;\n\nexport const EmbeddedEntityBlockPlugin = ({\n  richTextAPI: { sdk, logShortcutAction, logViewportAction },\n  nodeType,\n  hotkey\n}) => {\n  return {\n    renderNode: (props, _editor, next) => {\n      const { node, attributes, key } = props;\n      if (node.type === nodeType) {\n        return (\n          <EntityLinkBlock\n            sdk={sdk}\n            {...props}\n            {...attributes}\n            onEntityFetchComplete={() => {\n              logViewportAction('linkRendered', { key });\n            }}\n          />\n        );\n      }\n      return next();\n    },\n    onKeyDown(e, editor, next) {\n      if (hotkey && isHotkey(hotkey, e)) {\n        selectEntityAndInsert(nodeType, sdk, editor, logShortcutAction);\n        return;\n      }\n      if (isHotkey('enter', e) && hasBlockOfType(editor, nodeType)) {\n        editor.insertBlock(BLOCKS.PARAGRAPH).focus();\n        return;\n      }\n      return next();\n    }\n  };\n};\n\nexport const EmbeddedEntryBlockPlugin = ({ richTextAPI }) => {\n  return EmbeddedEntityBlockPlugin({\n    richTextAPI,\n    nodeType: BLOCKS.EMBEDDED_ENTRY,\n    hotkey: ['mod+shift+e']\n  });\n};\n\nexport const EmbeddedAssetBlockPlugin = ({ richTextAPI }) => {\n  return EmbeddedEntityBlockPlugin({\n    richTextAPI,\n    nodeType: BLOCKS.EMBEDDED_ASSET,\n    hotkey: ['mod+shift+a']\n  });\n};\n","import { INLINES } from '@contentful/rich-text-types';\nimport { haveAnyInlines, haveEveryInlineOfType, haveInlines } from '../shared/UtilHave';\nimport newEntitySelectorConfigFromRichTextField from '../../helpers/newEntitySelectorConfigFromRichTextField';\n\nconst createInlineNode = id => ({\n  type: INLINES.EMBEDDED_ENTRY,\n  object: 'inline',\n  data: {\n    target: {\n      sys: {\n        id,\n        type: 'Link',\n        linkType: 'Entry'\n      }\n    }\n  }\n});\n\nexport const insertInline = (editor, entryId, focusNextLine = true) => {\n  if (haveInlines(editor, INLINES.EMBEDDED_ENTRY)) {\n    editor.setInlines(createInlineNode(entryId));\n  } else {\n    editor.insertInline(createInlineNode(entryId));\n  }\n\n  focusNextLine ? editor.moveToStartOfNextText().focus() : null;\n};\n\nexport const hasOnlyInlineEntryInSelection = editor => {\n  const inlines = editor.value.inlines;\n  const selection = editor.value.selection;\n  if (inlines.size === 1 && selection.start.key === selection.end.key) {\n    return inlines.get(0).type === INLINES.EMBEDDED_ENTRY;\n  }\n};\n\n/**\n * Invokes entity selector modal and inserts inline embed.\n * @param {import('@contentful/field-editor-reference/dist/types').FieldExtensionSDK} sdk\n * @param {slate.Editor} editor\n * @param {function} logAction\n */\nexport const selectEntryAndInsert = async (sdk, editor, logAction) => {\n  const nodeType = INLINES.EMBEDDED_ENTRY;\n  logAction('openCreateEmbedDialog', { nodeType });\n\n  const { field, dialogs } = sdk;\n  const baseConfig = newEntitySelectorConfigFromRichTextField(field, nodeType);\n  const config = { ...baseConfig, withCreate: true };\n  try {\n    const entry = await dialogs.selectSingleEntry(config);\n    if (!entry) {\n      return;\n    }\n    insertInline(editor, entry.sys.id);\n    logAction('insert', { nodeType });\n  } catch (error) {\n    if (error) {\n      throw error;\n    } else {\n      logAction('cancelCreateEmbedDialog', { nodeType });\n    }\n  }\n};\n\nexport const canInsertInline = editor => {\n  return !haveAnyInlines(editor) || haveEveryInlineOfType(editor, INLINES.EMBEDDED_ENTRY);\n};\n","import React, { Component } from 'react';\nimport { DropdownListItem, Icon, Button } from '@contentful/forma-36-react-components';\nimport { INLINES } from '@contentful/rich-text-types';\n\nimport { selectEntryAndInsert, canInsertInline } from './Utils';\nimport { TOOLBAR_PLUGIN_PROP_TYPES } from '../shared/PluginApi';\nimport { toolbarActionHandlerWithSafeAutoFocus } from '../shared/Util';\n\nexport default class EntryLinkToolbarIcon extends Component {\n  static propTypes = TOOLBAR_PLUGIN_PROP_TYPES;\n\n  static defaultProps = {\n    isButton: false,\n  };\n\n  handleClick = (e) => {\n    this.props.onCloseEmbedMenu();\n    this.handleAction(e);\n  };\n\n  handleAction = toolbarActionHandlerWithSafeAutoFocus(this, async () => {\n    const {\n      editor,\n      richTextAPI: { sdk, logToolbarAction },\n    } = this.props;\n    await selectEntryAndInsert(sdk, editor, logToolbarAction);\n    this.props.onToggle(editor);\n  });\n\n  render() {\n    return this.props.isButton ? (\n      <Button\n        disabled={this.props.disabled}\n        className={`${INLINES.EMBEDDED_ENTRY}-button`}\n        size=\"small\"\n        onClick={(event) => this.handleClick(event)}\n        icon=\"EmbeddedEntryInline\"\n        buttonType=\"muted\"\n        testId={`toolbar-toggle-${INLINES.EMBEDDED_ENTRY}`}>\n        Embed inline entry\n      </Button>\n    ) : (\n      <DropdownListItem\n        isDisabled={this.props.disabled || !canInsertInline(this.props.editor)}\n        className=\"rich-text__entry-link-block-button\"\n        size=\"small\"\n        icon=\"Entry\"\n        testId={`toolbar-toggle-${INLINES.EMBEDDED_ENTRY}`}\n        onClick={this.handleClick}>\n        <div className=\"cf-flex-grid\">\n          <Icon\n            icon=\"EmbeddedEntryInline\"\n            color=\"secondary\"\n            className=\"rich-text__embedded-entry-list-icon\"\n          />\n          Inline entry\n        </div>\n      </DropdownListItem>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from 'emotion';\nimport tokens from '@contentful/forma-36-tokens';\nimport {\n  InlineEntryCard,\n  DropdownListItem,\n  DropdownList,\n  Icon\n} from '@contentful/forma-36-react-components';\nimport { entityHelpers } from '@contentful/field-editor-shared';\nimport { useEntities, ScheduledIconWithTooltip } from '@contentful/field-editor-reference';\n\nimport { INLINES } from '@contentful/rich-text-types';\n\nconst { getEntryTitle, getEntryStatus } = entityHelpers;\n\nconst styles = {\n  scheduledIcon: css({\n    verticalAlign: 'text-bottom',\n    marginRight: tokens.spacing2Xs\n  })\n};\n\nexport const FetchingWrappedInlineEntryCard = props => {\n  const { loadEntry, entries } = useEntities();\n\n  React.useEffect(() => {\n    loadEntry(props.entryId);\n  }, [props.entryId]);\n\n  const entry = entries[props.entryId];\n\n  React.useEffect(() => {\n    if (entry) {\n      props.onEntityFetchComplete && props.onEntityFetchComplete();\n    }\n  }, [entry]);\n\n  if (entry === 'failed') {\n    return (\n      <InlineEntryCard testId={INLINES.EMBEDDED_ENTRY} selected={props.isSelected}>\n        Entry missing or inaccessible\n      </InlineEntryCard>\n    );\n  }\n\n  if (entry === undefined) {\n    return <InlineEntryCard loading />;\n  }\n\n  const allContentTypes = props.sdk.space.getCachedContentTypes();\n\n  const contentType = allContentTypes.find(\n    contentType => contentType.sys.id === entry.sys.contentType.sys.id\n  );\n  const contentTypeName = contentType ? contentType.name : '';\n\n  const status = getEntryStatus(entry.sys);\n\n  if (status === 'deleted') {\n    return (\n      <InlineEntryCard\n        testId={INLINES.EMBEDDED_ENTRY}\n        onRemove={props.onRemove}\n        selected={props.isSelected}>\n        Entry missing or inaccessible\n      </InlineEntryCard>\n    );\n  }\n\n  const title = getEntryTitle({\n    entry: entry,\n    contentType,\n    localeCode: props.sdk.field.locale,\n    defaultLocaleCode: props.sdk.locales.default,\n    defaultTitle: 'Untitled'\n  });\n\n  return (\n    <InlineEntryCard\n      testId={INLINES.EMBEDDED_ENTRY}\n      selected={props.isSelected}\n      title={`${contentTypeName}: ${title}`}\n      status={status}\n      dropdownListElements={\n        !props.isReadOnly ? (\n          <DropdownList>\n            <DropdownListItem onClick={props.onEdit}>Edit</DropdownListItem>\n            <DropdownListItem onClick={props.onRemove} isDisabled={props.isDisabled}>\n              Remove\n            </DropdownListItem>\n          </DropdownList>\n        ) : null\n      }>\n      <ScheduledIconWithTooltip\n        getEntityScheduledActions={props.sdk.space.getEntityScheduledActions}\n        entityType=\"Entry\"\n        entityId={entry.sys.id}>\n        <Icon className={styles.scheduledIcon} icon=\"Clock\" color=\"muted\" testId=\"scheduled-icon\" />\n      </ScheduledIconWithTooltip>\n      {title}\n    </InlineEntryCard>\n  );\n};\n\nFetchingWrappedInlineEntryCard.propTypes = {\n  sdk: PropTypes.object.isRequired,\n  entryId: PropTypes.string.isRequired,\n  isDisabled: PropTypes.bool.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n  isReadOnly: PropTypes.bool.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  onEdit: PropTypes.func.isRequired,\n  onEntityFetchComplete: PropTypes.func\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from 'emotion';\nimport { FetchingWrappedInlineEntryCard } from './FetchingWrappedInlineEntryCard';\n\nconst styles = {\n  root: css({\n    margin: '0px 5px',\n    fontSize: 'inherit',\n    span: {\n      webkitUserSelect: 'none',\n      mozUserSelect: 'none',\n      msUserSelect: 'none',\n      userSelect: 'none'\n    }\n  })\n};\n\nclass EmbeddedEntryInline extends React.Component {\n  static propTypes = {\n    sdk: PropTypes.object.isRequired,\n    isSelected: PropTypes.bool.isRequired,\n    attributes: PropTypes.object.isRequired,\n    editor: PropTypes.object.isRequired,\n    node: PropTypes.object.isRequired,\n    onEntityFetchComplete: PropTypes.func.isRequired\n  };\n\n  getEntitySys() {\n    const data = this.props.node.data;\n    return {\n      id: data.get('target').sys.id,\n      type: data.get('target').sys.linkType\n    };\n  }\n\n  handleEditClick = () => {\n    const { id } = this.getEntitySys();\n    return this.props.sdk.navigator.openEntry(id, { slideIn: true });\n  };\n\n  handleRemoveClick = () => {\n    const { editor, node } = this.props;\n    editor.removeNodeByKey(node.key);\n  };\n\n  render() {\n    const { sdk, editor, isSelected } = this.props;\n    const isDisabled = editor.props.readOnly;\n    const isReadOnly = editor.props.actionsDisabled;\n    const { id: entryId } = this.getEntitySys();\n    return (\n      <span {...this.props.attributes} className={styles.root}>\n        <FetchingWrappedInlineEntryCard\n          sdk={sdk}\n          entryId={entryId}\n          isSelected={isSelected}\n          isDisabled={isDisabled}\n          isReadOnly={isReadOnly}\n          onRemove={this.handleRemoveClick}\n          onEdit={this.handleEditClick}\n          onEntityFetchComplete={this.props.onEntityFetchComplete}\n        />\n      </span>\n    );\n  }\n}\n\nexport default EmbeddedEntryInline;\n","import React from 'react';\nimport isHotkey from 'is-hotkey';\nimport { INLINES } from '@contentful/rich-text-types';\nimport ToolbarIcon from './ToolbarIcon';\nimport EmbeddedEntryInline from './EmbeddedEntryInline';\n\nimport { selectEntryAndInsert, hasOnlyInlineEntryInSelection, canInsertInline } from './Utils';\n\nexport default ToolbarIcon;\n\nexport const EmbeddedEntryInlinePlugin = ({\n  richTextAPI: { sdk, logShortcutAction, logViewportAction }\n}) => ({\n  renderNode: (props, _editor, next) => {\n    const { node, attributes, key } = props;\n    if (node.type === INLINES.EMBEDDED_ENTRY) {\n      return (\n        <EmbeddedEntryInline\n          sdk={sdk}\n          {...props}\n          {...attributes}\n          onEntityFetchComplete={() => {\n            logViewportAction('linkRendered', { key });\n          }}\n        />\n      );\n    }\n    return next();\n  },\n  onKeyDown: (event, editor, next) => {\n    const hotkey = ['mod+shift+2'];\n    if (isHotkey(hotkey, event)) {\n      if (canInsertInline(editor)) {\n        selectEntryAndInsert(sdk, editor, logShortcutAction);\n        return;\n      }\n    }\n    if (isHotkey('enter', event)) {\n      if (hasOnlyInlineEntryInSelection(editor)) {\n        event.preventDefault();\n        editor.moveToStartOfNextText();\n        return;\n      }\n    }\n    return next();\n  }\n});\n","import * as React from 'react';\nimport { TOOLBAR_PLUGIN_PROP_TYPES } from '../shared/PluginApi';\nimport { toolbarActionHandlerWithSafeAutoFocus } from '../shared/Util';\nimport EditList from './EditListWrapper';\n\nconst applyChange = (editor, type, logAction) => {\n  const {\n    utils,\n    changes: { unwrapList, wrapInList },\n  } = EditList();\n\n  if (utils.isSelectionInList(editor.value)) {\n    if (utils.getCurrentList(editor.value).type !== type) {\n      const currentList = utils.getCurrentList(editor.value);\n      editor.setNodeByKey(currentList.key, type);\n      logAction('insert', { nodeType: type });\n    } else {\n      unwrapList(editor);\n      logAction('remove', { nodeType: type });\n    }\n  } else {\n    wrapInList(editor, type);\n    logAction('insert', { nodeType: type });\n  }\n\n  return editor.focus();\n};\n\nconst isActive = (editor, type) => {\n  const list = EditList().utils.getCurrentList(editor.value);\n\n  if (list) {\n    return list.type === type;\n  }\n  return false;\n};\n\nexport default ({ type, title, icon }) => (Block) => {\n  return class ToolbarDecorator extends React.Component {\n    static propTypes = TOOLBAR_PLUGIN_PROP_TYPES;\n\n    handleToggle = toolbarActionHandlerWithSafeAutoFocus(this, () => {\n      const {\n        editor,\n        onToggle,\n        richTextAPI: { logToolbarAction },\n      } = this.props;\n      applyChange(editor, type, logToolbarAction);\n      onToggle(editor);\n    });\n\n    render() {\n      const { editor } = this.props;\n      return (\n        <Block\n          type={type}\n          icon={icon}\n          title={title}\n          onToggle={this.handleToggle}\n          isActive={isActive(editor, type)}\n          disabled={this.props.disabled}\n        />\n      );\n    }\n  };\n};\n","import React from 'react';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport commonNode from '../shared/NodeDecorator';\nimport listToggleDecorator from './ToolbarDecorator';\nimport EditListWrapper from './EditListWrapper';\n\nexport const ListPlugin = () => {\n  return {\n    ...EditListWrapper(),\n    renderNode: (props, _editor, next) => {\n      if (props.node.type === BLOCKS.UL_LIST) {\n        return commonNode('ul')(props);\n      } else if (props.node.type === BLOCKS.OL_LIST) {\n        return commonNode('ol')(props);\n      } else if (props.node.type === BLOCKS.LIST_ITEM) {\n        return commonNode('li')(props);\n      }\n      return next();\n    }\n  };\n};\n\nexport const UnorderedList = listToggleDecorator({\n  type: BLOCKS.UL_LIST,\n  title: 'UL',\n  icon: 'ListBulleted'\n})(props => <ToolbarIcon {...props} />);\n\nexport const OrderedList = listToggleDecorator({\n  type: BLOCKS.OL_LIST,\n  title: 'OL',\n  icon: 'ListNumbered'\n})(props => <ToolbarIcon {...props} />);\n","import React, { Component } from 'react';\nimport { BLOCKS } from '@contentful/rich-text-types';\nimport ToolbarIcon from '../shared/ToolbarIcon';\nimport blockSelectDecorator from '../shared/BlockSelectDecorator';\nimport { haveTextInSomeBlocks } from '../shared/UtilHave';\nimport { css, cx } from 'emotion';\nimport tokens from '@contentful/forma-36-tokens';\n\nconst styles = {\n  hr: css`\n    height: ${tokens.spacingM};\n    background: transparent;\n    position: relative;\n    margin: 0 0 ${tokens.spacingL};\n    &:hover {\n      cursor: pointer;\n    }\n    &::after {\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 1px;\n      background: ${tokens.colorElementMid};\n      top: 50%;\n    }\n  `,\n  hrSelected: css`\n    &::after {\n      background: ${tokens.colorPrimary};\n      -webkit-box-shadow: 0px 0px 5px ${tokens.colorPrimary};\n      box-shadow: 0px 0px 5px ${tokens.colorPrimary};\n    }\n  `\n};\n\nexport const HrPlugin = () => {\n  return {\n    renderNode: (props, _editor, next) => {\n      if (props.node.type === BLOCKS.HR) {\n        return (\n          <hr\n            className={cx(styles.hr, props.isSelected && styles.hrSelected)}\n            {...props.attributes}\n          />\n        );\n      }\n      return next();\n    }\n  };\n};\n\nclass Hr extends Component {\n  render() {\n    return <ToolbarIcon {...this.props} />;\n  }\n}\n\nexport default blockSelectDecorator({\n  type: BLOCKS.HR,\n  title: 'HR',\n  icon: 'HorizontalRule',\n  applyChange: (editor, type) => {\n    const hr = {\n      type,\n      object: 'block'\n    };\n\n    if (editor.value.blocks.size === 0 || haveTextInSomeBlocks(editor)) {\n      editor.insertBlock(hr);\n    } else {\n      editor.setBlocks(hr);\n    }\n\n    editor.insertBlock(BLOCKS.PARAGRAPH).focus();\n  }\n})(Hr);\n","import * as contentfulSlateJSAdapter from '@contentful/contentful-slatejs-adapter';\nimport { documentToPlainTextString } from '@contentful/rich-text-plain-text-renderer';\nimport schema from '../../constants/Schema';\n\nexport const getCharacterCount = editor => {\n  const document = contentfulSlateJSAdapter.toContentfulDocument({\n    document: editor.value.document.toJSON(),\n    schema\n  });\n  return documentToPlainTextString(document).length;\n};\n","import { getCharacterCount } from './Paste';\n\n/**\n * This plugin tracks the character count before and after a paste event,\n * including the text selected during the event. This creates parity with our\n * tracking for the markdown editor.\n */\nexport const PastePlugin = ({ richTextAPI: { logShortcutAction } }) => ({\n  onPaste(_event, editor, next) {\n    const characterCountSelection = global.getSelection().toString().length;\n    const characterCountBefore = getCharacterCount(editor);\n\n    setTimeout(() => {\n      const characterCountAfter = getCharacterCount(editor);\n      logShortcutAction('paste', {\n        characterCountAfter,\n        characterCountBefore,\n        characterCountSelection\n      });\n    });\n    next();\n    return;\n  }\n});\n","import HtmlSerializer from 'slate-html-serializer';\nimport { BLOCKS, MARKS, INLINES } from '@contentful/rich-text-types';\n\n/**\n * Tags to block types mapping\n */\nconst BLOCK_TAGS = {\n  p: BLOCKS.PARAGRAPH,\n  ul: BLOCKS.UL_LIST,\n  ol: BLOCKS.OL_LIST,\n  blockquote: BLOCKS.QUOTE,\n  hr: BLOCKS.HR,\n  h1: BLOCKS.HEADING_1,\n  h2: BLOCKS.HEADING_2,\n  h3: BLOCKS.HEADING_3,\n  h4: BLOCKS.HEADING_4,\n  h5: BLOCKS.HEADING_5,\n  h6: BLOCKS.HEADING_6\n};\n\n/**\n * tags to marks types mapping\n */\nconst MARK_TAGS = {\n  strong: MARKS.BOLD,\n  b: MARKS.BOLD,\n  em: MARKS.ITALIC,\n  i: MARKS.ITALIC,\n  u: MARKS.UNDERLINE,\n  sup: MARKS.SUPERSCRIPT,\n  sub: MARKS.SUBSCRIPT,\n  code: MARKS.CODE\n};\n\nconst isGoogleWrapper = el =>\n  el.tagName.toLowerCase() === 'b' && el.id.startsWith('docs-internal-guid-');\n\nconst isGoogleBold = el => {\n  return el.style.fontWeight === '700';\n};\n\nconst isGoogleItalic = el => {\n  return el.style.fontStyle === 'italic';\n};\n\nconst isGoogleUnderline = el => {\n  return el.style.textDecoration === 'underline';\n};\n\nconst gDocsRules = {\n  deserialize(el, next) {\n    const isFromGoogleDocs = !!el.ownerDocument.querySelector('[id*=docs-internal-guid-]');\n\n    if (!isFromGoogleDocs) {\n      return;\n    }\n    if (isGoogleWrapper(el)) {\n      return next(el.childNodes);\n    }\n\n    /**\n     * Google Docs represent marks with css styles applied to SPAN\n     * instead of html tags.\n     * */\n    if (el.tagName.toLowerCase() === 'span') {\n      const marks = [];\n      if (isGoogleBold(el)) {\n        marks.push(MARKS.BOLD);\n      }\n      if (isGoogleItalic(el)) {\n        marks.push(MARKS.ITALIC);\n      }\n      if (isGoogleUnderline(el)) {\n        marks.push(MARKS.UNDERLINE);\n      }\n\n      const textNode = {\n        object: 'text',\n        leaves: [\n          {\n            object: 'leaf',\n            text: el.textContent,\n            marks: marks.map(type => ({ object: 'mark', type }))\n          }\n        ]\n      };\n\n      return textNode;\n    }\n  }\n};\n\nconst listItems = {\n  deserialize(el, next) {\n    /** list-items in Contentful's schema must have blocks as direct children */\n    if (el.tagName.toLowerCase() === 'li') {\n      let childNodes = next(el.childNodes);\n\n      childNodes = childNodes.map(node => {\n        if (node.object === 'text') {\n          return {\n            object: 'block',\n            type: BLOCKS.PARAGRAPH,\n            nodes: [node]\n          };\n        } else {\n          return node;\n        }\n      });\n\n      return {\n        object: 'block',\n        type: BLOCKS.LIST_ITEM,\n        nodes: childNodes\n      };\n    }\n  }\n};\n\nconst links = {\n  deserialize(el, next) {\n    if (el.tagName.toLowerCase() === 'a') {\n      // we only support links with href,\n      // if href is not defined, we should serialize as text\n      if (el.getAttribute('href')) {\n        return {\n          object: 'inline',\n          type: INLINES.HYPERLINK,\n          nodes: next(el.childNodes),\n          data: {\n            uri: el.getAttribute('href')\n          }\n        };\n      } else {\n        return next(el.childNodes);\n      }\n    }\n  }\n};\n\nconst macOSTrailingBreak = {\n  deserialize(el) {\n    if (el.tagName.toLowerCase() === 'br' && el.classList.contains('Apple-interchange-newline')) {\n      return null;\n    }\n  }\n};\n\nconst marks = {\n  deserialize(el, next) {\n    const mark = MARK_TAGS[el.tagName.toLowerCase()];\n    if (mark) {\n      return {\n        object: 'mark',\n        type: mark,\n        nodes: next(el.childNodes)\n      };\n    }\n  }\n};\n\nconst blocks = {\n  deserialize(el, next) {\n    const block = BLOCK_TAGS[el.tagName.toLowerCase()];\n    if (block) {\n      const childNodes = next(el.childNodes);\n\n      return {\n        object: 'block',\n        type: block,\n        nodes: childNodes.length > 0 ? childNodes : [{ object: 'text' }]\n      };\n    }\n  }\n};\n\nconst RULES = [gDocsRules, listItems, links, macOSTrailingBreak, marks, blocks];\n\nexport const create = () => {\n  return new HtmlSerializer({\n    rules: RULES\n  });\n};\n","import { getEventTransfer } from 'slate-react';\nimport { create as createSerializer } from './Serializer';\n\n/**\n * The plugin allows to paste html to the Structured Text Editor\n * by deserializing html content from ClipboardEvent into\n * Slate document.\n */\nexport const PasteHtmlPlugin = () => {\n  const serializer = createSerializer();\n  return {\n    onPaste(event, editor, next) {\n      const transfer = getEventTransfer(event);\n      if (transfer.type != 'html') {\n        next();\n        return;\n      }\n      const { document } = serializer.deserialize(transfer.html);\n\n      editor.insertFragment(document);\n      return;\n    }\n  };\n};\n","import { getEventTransfer } from 'slate-react';\nimport PlainSerializer from 'slate-plain-serializer';\nimport { BLOCKS } from '@contentful/rich-text-types';\n\n/**\n * This plugin changes how pasting text is handled in the Rich text editor by\n * deserializing text content from ClipboardEvent into a Slate document. We\n * use it to handle converting new lines to paragraphs. Without this plugin,\n * lines of text separated by an empty new line will result in extra empty\n * paragraphs.\n */\nexport const PasteTextPlugin = () => {\n  return {\n    onPaste(event, editor, next) {\n      const transfer = getEventTransfer(event);\n      if (transfer.type !== 'text') {\n        next();\n        return;\n      }\n\n      const string = transfer.text;\n\n      const { document } = PlainSerializer.deserialize(string, {\n        defaultBlock: BLOCKS.PARAGRAPH,\n        delimiter: '\\n\\n' // We look for double new lines as a delimiter for paragraphs\n      });\n\n      editor.insertFragment(document);\n      return;\n    }\n  };\n};\n","const RICH_TEXT_COMMANDS_CONTEXT_MARK_TYPE = 'richTextCommandsContext';\n\n/**\n * @description\n * Returns Command Palette command text or leading slash\n *\n * @param {Slate.Editor} editor\n * @returns {String}\n */\nexport const getCommandText = editor => {\n  // matches the character / literally (case sensitive)\n  if (!editor.value.startText) {\n    return null;\n  }\n  const COMMAND_REGEX = /\\/(\\S*)$/;\n  const startOffset = editor.value.selection.start.offset;\n  const textBefore = editor.value.startText.text.slice(0, startOffset);\n  const result = COMMAND_REGEX.exec(textBefore);\n  return result === null ? null : result[1] || result[0];\n};\n\n/**\n * @description\n * Returns Command Palette Decoration if applicable to current text.\n *\n * @param {Slate.Editor} editor\n * @returns {Slate.Decoration?}\n */\nexport const getDecorationOrDefault = editor => {\n  const value = editor.value;\n  if (!value.startText) {\n    return null;\n  }\n\n  const inputValue = getCommandText(editor);\n\n  const { selection } = value;\n\n  if (inputValue) {\n    const decoration = {\n      anchor: {\n        key: selection.start.key,\n        offset: selection.start.offset - (inputValue.length + 1)\n      },\n      focus: {\n        key: selection.start.key,\n        offset: selection.start.offset\n      },\n      mark: {\n        type: RICH_TEXT_COMMANDS_CONTEXT_MARK_TYPE\n      }\n    };\n    return decoration;\n  }\n  return null;\n};\n\nexport const hasCommandPaletteMarkType = markType => {\n  return markType === RICH_TEXT_COMMANDS_CONTEXT_MARK_TYPE;\n};\n\n/**\n * @description\n * Checks if document has command palette decoration\n *\n * @param {Slate.Editor} editor\n * @returns {Boolean}\n */\nexport const hasCommandPaletteDecoration = editor => {\n  const decorations = editor.value.document.getDecorations(editor);\n\n  if (decorations.isEmpty()) {\n    return false;\n  }\n\n  const commandPaletteDecoration = decorations.find(\n    d => d.mark.type === RICH_TEXT_COMMANDS_CONTEXT_MARK_TYPE\n  );\n  return Boolean(commandPaletteDecoration);\n};\n\nexport const removeCommand = (editor, command, anchorOffset = 1) => {\n  editor.removeTextByKey(\n    editor.value.selection.start.key,\n    editor.value.selection.start.offset - (command.length + anchorOffset),\n    command.length + anchorOffset\n  );\n};\n","import { isNodeTypeEnabled } from '../../validations';\nimport { INLINES, BLOCKS } from '@contentful/rich-text-types';\nimport { entityHelpers } from '@contentful/field-editor-shared';\n\nconst ACTIONS = {\n  EMBED: 'embed',\n  CREATE_EMBED: 'create_embed'\n};\n\nexport async function fetchAssets(sdk, query = '') {\n  const assets = await sdk.space.getAssets({ query });\n  return assets.items.map(asset => ({\n    contentTypeName: 'Asset',\n    displayTitle: asset.fields.title ? asset.fields.title[sdk.field.locale] : 'Untitled',\n    id: asset.sys.id,\n    entry: asset,\n    thumbnail:\n      asset.fields.file &&\n      asset.fields.file[sdk.field.locale] &&\n      `${asset.fields.file[sdk.field.locale].url}?h=30`\n  }));\n}\n\nexport async function fetchEntries(sdk, contentType, query = '') {\n  const entries = await sdk.space.getEntries({\n    content_type: contentType.sys.id,\n    query\n  });\n\n  return Promise.all(\n    entries.items.map(async entry => {\n      const description = entityHelpers.getEntityDescription({\n        contentType,\n        entity: entry,\n        localeCode: sdk.field.locale,\n        defaultLocaleCode: sdk.locales.default\n      });\n      const displayTitle = entityHelpers.getEntryTitle({\n        entry,\n        contentType,\n        localeCode: sdk.field.locale,\n        defaultLocaleCode: sdk.locales.default,\n        defaultTitle: 'Untitled'\n      });\n      return {\n        contentTypeName: contentType.name,\n        displayTitle: displayTitle,\n        id: entry.sys.contentType.sys.id,\n        description,\n        entry\n      };\n    })\n  );\n}\n\n/**\n * @description\n * Checks the field validations if the current content type is valid to be linked/embedded.\n *\n * @param {Object} field\n * @param {Object} contentType\n * @param {String} embedType\n * @returns {Boolean}\n */\nexport const isValidLinkedContentType = (field, contentType, embedType) => {\n  if (field.validations.length === 0) {\n    return true;\n  }\n\n  const nodes = field.validations.filter(val => val.nodes)[0].nodes;\n\n  if (nodes[embedType] === undefined) {\n    return true;\n  }\n\n  return !!nodes[embedType]\n    .filter(typeVal => typeVal.linkContentType)\n    .reduce((pre, cur) => [...pre, cur.linkContentType], [])\n    .reduce((pre, cur) => [...pre, ...cur], [])\n    .find(ct => ct === contentType.sys.id);\n};\n\nexport const isEmbeddingEnabled = field =>\n  isNodeTypeEnabled(field, BLOCKS.EMBEDDED_ASSET) ||\n  isNodeTypeEnabled(field, BLOCKS.EMBEDDED_ENTRY) ||\n  isNodeTypeEnabled(field, INLINES.EMBEDDED_ENTRY);\n\nexport class CommandPaletteActionBuilder {\n  constructor(sdk) {\n    this.sdk = sdk;\n  }\n\n  // TODO: Let's create dedicated functions for assets so we do not have to pass a CT.\n\n  maybeBuildEmbedAction(embedType, contentType, callback) {\n    if (!isNodeTypeEnabled(this.sdk.field, embedType)) {\n      return false;\n    }\n    const isAsset = !contentType;\n    if (!isAsset && !isValidLinkedContentType(this.sdk.field, contentType, embedType)) {\n      return false;\n    }\n\n    return buildAction(embedType, contentType, ACTIONS.EMBED, callback);\n  }\n\n  async maybeBuildCreateAndEmbedAction(embedType, contentType, callback) {\n    if (!isNodeTypeEnabled(this.sdk.field, embedType)) {\n      return false;\n    }\n\n    const isAsset = !contentType;\n    if (!isAsset) {\n      if (!isValidLinkedContentType(this.sdk.field, contentType, embedType)) {\n        return false;\n      }\n\n      const canCreateEntryOfContentType = await this.sdk.access.can('create', {\n        sys: {\n          type: 'Entry',\n          contentType: {\n            sys: contentType.sys\n          }\n        }\n      });\n\n      if (canCreateEntryOfContentType === false) {\n        return false;\n      }\n    } else {\n      const canCreateAssets = await this.sdk.access.can('create', 'Asset');\n      if (canCreateAssets === false) {\n        return false;\n      }\n    }\n\n    return buildAction(embedType, contentType, ACTIONS.CREATE_EMBED, callback);\n  }\n}\n\nfunction buildAction(embedType, contentType, actionType, callback) {\n  const isAsset = !contentType;\n  const isInline = embedType === INLINES.EMBEDDED_ENTRY;\n  const label = `${actionType === ACTIONS.EMBED ? 'Embed' : 'Create and embed'} ${\n    isAsset ? 'Asset' : contentType.name\n  } ${isInline ? ' - Inline' : ''}`;\n\n  const icon = isInline ? 'EmbeddedEntryInline' : 'EmbeddedEntryBlock';\n\n  return {\n    label,\n    group: isAsset ? 'Assets' : contentType.name,\n    callback,\n    icon\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport isHotKey from 'is-hotkey';\nimport cn from 'classnames';\nimport { css } from 'emotion';\nimport tokens from '@contentful/forma-36-tokens';\nimport {\n  SkeletonContainer,\n  SkeletonBodyText,\n  Spinner,\n  SectionHeading,\n  Icon,\n  IconButton\n} from '@contentful/forma-36-react-components';\nimport uniqBy from 'lodash/uniqBy';\n\nconst styles = {\n  commandPanel: css({\n    display: 'block',\n    background: tokens.colorWhite,\n    boxShadow: '0 2px 5px rgba(0, 0, 0, 0.1), 0 5px 10px -5px rgba(0, 0, 0, 0.3)',\n    border: `1px solid ${tokens.colorElementDark}`,\n    borderRadius: '3px',\n    fontFamily: tokens.fontStackPrimary,\n    width: '500px',\n    overflowY: 'auto'\n  }),\n  commandPanelList: css({\n    display: 'block',\n    listStyle: 'none',\n    margin: 0,\n    padding: 0,\n    height: '200px',\n    overflowY: 'auto'\n  }),\n  item: css({\n    fontSize: tokens.fontSizeM,\n    lineHeight: tokens.lineHeightDefault,\n    padding: `${tokens.spacingS} ${tokens.spacingXs}`,\n    borderBottom: `1px solid ${tokens.colorElementMid}`,\n    margin: 0,\n    color: tokens.colorTextDark\n  }),\n  divider: css({\n    fontWeight: tokens.fontWeightDemiBold,\n    padding: `${tokens.spacingS} ${tokens.spacingXs}`,\n    letterSpacing: tokens.letterSpacingWide,\n    fontSize: tokens.fontSizeS,\n    textTransform: 'uppercase',\n    borderBottom: `1px solid ${tokens.colorElementDark}`,\n    margin: 0,\n    lineHeight: tokens.lineHeightDefault,\n    color: tokens.colorTextDark\n  }),\n  icon: css({\n    marginRight: 10\n  }),\n  isSelected: css({\n    background: tokens.colorElementLight\n  }),\n  skeletonContainer: css({\n    padding: tokens.spacingM,\n    height: 200,\n    margin: 0\n  }),\n  button: css({\n    textAlign: 'left',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    border: 'none',\n    background: 'transparent',\n    fontSize: tokens.fontSizeM\n  }),\n  navBar: css({\n    display: 'flex',\n    bottom: 0,\n    background: tokens.colorElementLightest,\n    padding: `${tokens.spacingS} ${tokens.spacingXs}`,\n    width: '100%'\n  }),\n  loader: css({\n    marginLeft: 'auto'\n  }),\n  thumbnail: css({\n    marginRight: 15\n  }),\n  instruction: css({\n    marginRight: 15,\n    color: tokens.colorTextLight\n  }),\n  closeButton: css({\n    marginLeft: 'auto'\n  })\n};\n\nconst itemPropType = PropTypes.shape({\n  label: PropTypes.string,\n  callback: PropTypes.func\n});\n\nclass CommandPanelItem extends React.Component {\n  static propTypes = {\n    isSelected: PropTypes.bool,\n    index: PropTypes.number,\n    classNames: PropTypes.string,\n    item: itemPropType\n  };\n  listItemRef = null;\n\n  componentDidUpdate() {\n    if (this.props.isSelected) {\n      this.listItemRef.scrollIntoView({\n        block: 'nearest',\n        inline: 'start'\n      });\n    }\n  }\n\n  render() {\n    const { index, classNames, item } = this.props;\n\n    return (\n      <li\n        key={index}\n        className={classNames}\n        ref={ref => {\n          this.listItemRef = ref;\n        }}>\n        <button type=\"button\" className={styles.button} onClick={item.callback && item.callback}>\n          {item.icon && <Icon className={styles.icon} icon={item.icon} color=\"secondary\" />}\n          {item.thumbnail && <img className={styles.thumbnail} src={item.thumbnail} alt=\"\" />}\n          {item.label}\n        </button>\n      </li>\n    );\n  }\n}\n\nconst Instruction = ({ children }) => <span className={styles.instruction}>{children}</span>;\nInstruction.propTypes = {\n  children: PropTypes.node\n};\n\nexport class CommandPanel extends React.Component {\n  static propTypes = {\n    items: PropTypes.arrayOf(itemPropType),\n    searchString: PropTypes.string,\n    className: PropTypes.string,\n    testId: PropTypes.string,\n    isLoading: PropTypes.bool,\n    isUpdating: PropTypes.bool,\n    breadcrumb: PropTypes.string,\n    richTextAPI: PropTypes.object,\n    onClose: PropTypes.func\n  };\n  static defaultProps = {\n    className: undefined,\n    searchString: '',\n    items: [],\n    testId: 'cf-ui-command-panel',\n    isLoading: true,\n    isUpdating: false\n  };\n\n  state = {\n    selectedKey: 0,\n    items: []\n  };\n\n  static getDerivedStateFromProps(props, state) {\n    const itemsHasUpdated = props.items !== state.originalItems;\n    const searchStringHasUpdated = props.searchString !== state.originalSearchString;\n\n    const items = props.items.filter(item =>\n      item.label.toLowerCase().includes(props.searchString ? props.searchString.toLowerCase() : '')\n    );\n\n    return {\n      originalItems: props.items,\n      originalSearchString: props.searchString,\n      items,\n      selectedKey: itemsHasUpdated || searchStringHasUpdated ? 0 : state.selectedKey\n    };\n  }\n\n  componentDidMount() {\n    this.props.richTextAPI.logViewportAction('openRichTextCommandsPalette');\n    document.addEventListener('keydown', this.handleKeyboard, true);\n  }\n\n  componentWillUnmount() {\n    this.props.richTextAPI.logViewportAction('cancelRichTextCommandsPalette');\n    document.removeEventListener('keydown', this.handleKeyboard, true);\n  }\n\n  handleKeyboard = e => {\n    if (isHotKey('up', e)) {\n      if (this.state.selectedKey === 0) return;\n      this.setState(state => ({\n        selectedKey: state.selectedKey - 1\n      }));\n    }\n\n    if (isHotKey('down', e)) {\n      if (this.state.selectedKey === this.state.items.length - 1) return;\n      this.setState(state => ({\n        selectedKey: state.selectedKey + 1\n      }));\n    }\n\n    if (isHotKey('enter', e)) {\n      const selectedItem = this.state.items[this.state.selectedKey];\n      if (selectedItem && selectedItem.callback) selectedItem.callback();\n    }\n  };\n\n  renderGroups() {\n    const groups = uniqBy(\n      this.state.items.map(item => item.group),\n      value => value\n    );\n\n    if (!groups.length) {\n      return <li className={styles.item}>No results</li>;\n    }\n\n    return groups.map((groupName, index) => {\n      return (\n        <React.Fragment key={index}>\n          {groupName && (\n            <li key={groupName} className={styles.divider}>\n              {groupName}\n            </li>\n          )}\n          {this.renderItems(groupName)}\n        </React.Fragment>\n      );\n    });\n  }\n\n  renderItems(groupName) {\n    return this.state.items\n      .filter(item => item.group === groupName)\n      .map(item => {\n        const index = this.state.items.indexOf(item);\n        const isSelected = index === this.state.selectedKey;\n\n        const classNames = cn(styles.item, {\n          [styles.isSelected]: isSelected\n        });\n\n        return (\n          <CommandPanelItem\n            item={item}\n            classNames={classNames}\n            key={index}\n            isSelected={isSelected}\n          />\n        );\n      });\n  }\n\n  renderNavigationBar = () => (\n    <div className={styles.navBar}>\n      <SectionHeading>\n        {this.props.breadcrumb ? `Embed ${this.props.breadcrumb}` : 'Richtext Commands'}\n      </SectionHeading>\n      <IconButton\n        label=\"Close\"\n        className={styles.closeButton}\n        iconProps={{ icon: 'Close' }}\n        buttonType=\"muted\"\n        onClick={this.props.onClose}\n      />\n    </div>\n  );\n\n  renderStatusBar = () => (\n    <div className={styles.navBar}>\n      <span className={styles.instructions}>\n        <Instruction>↑ ↓ to navigate</Instruction>\n        <Instruction>↵ to confirm</Instruction>\n        <Instruction>esc to close</Instruction>\n      </span>\n      {this.props.isUpdating && (\n        <span className={styles.loader}>\n          loading <Spinner size=\"small\" />\n        </span>\n      )}\n    </div>\n  );\n\n  renderSkeleton = () => (\n    <li className={styles.skeletonContainer}>\n      <SkeletonContainer>\n        <SkeletonBodyText numberOfLines={7} />\n      </SkeletonContainer>\n    </li>\n  );\n\n  render() {\n    const { className, testId, isLoading } = this.props;\n\n    const classNames = cn(styles.commandPanel, className);\n\n    return (\n      <div className={classNames}>\n        {this.renderNavigationBar()}\n        <ul className={styles.commandPanelList} data-test-id={testId}>\n          {isLoading ? this.renderSkeleton() : this.renderGroups()}\n        </ul>\n        {this.renderStatusBar()}\n      </div>\n    );\n  }\n}\n\nexport default CommandPanel;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { BLOCKS, INLINES } from '@contentful/rich-text-types';\nimport isHotKey from 'is-hotkey';\nimport throttle from 'lodash/throttle';\nimport flatten from 'lodash/flatten';\nimport { insertBlock } from '../../EmbeddedEntityBlock/Util';\nimport { insertInline } from '../../EmbeddedEntryInline/Utils';\nimport { fetchEntries, fetchAssets, CommandPaletteActionBuilder } from '../CommandPaletteService';\nimport { removeCommand } from '../Util';\nimport CommandPanelMenu from './CommandPanelMenu';\nimport { InViewport } from '@contentful/forma-36-react-components';\n\nconst DEFAULT_POSITION = {\n  top: 0,\n  left: 0,\n};\nclass CommandPalette extends React.PureComponent {\n  static propTypes = {\n    editor: PropTypes.object,\n    command: PropTypes.string,\n    richTextAPI: PropTypes.object,\n  };\n\n  state = {\n    anchorPosition: DEFAULT_POSITION,\n    items: [],\n    isLoading: true,\n    panelPosition: 'bottom',\n  };\n\n  paletteDimensions = {\n    height: 300,\n    width: 300,\n  };\n\n  async componentDidMount() {\n    this.isComponentMounted = true;\n    await this.createInitialCommands();\n    this.updatePanelPosition();\n    this.paletteDimensions = {\n      height: this.palette.getBoundingClientRect().height,\n      width: this.palette.getBoundingClientRect().width,\n    };\n  }\n\n  componentWillUnmount() {\n    this.isComponentMounted = false;\n    this.removeEventListeners();\n    this.requestUpdate.cancel();\n  }\n\n  bindEventListeners = () => {\n    document.addEventListener('scroll', this.handleScroll, true);\n    document.addEventListener('keydown', this.handleKeyboard, true);\n    document.addEventListener('click', this.handleOutsideClick, true);\n  };\n\n  removeEventListeners = () => {\n    document.removeEventListener('scroll', this.handleScroll, true);\n    document.removeEventListener('keydown', this.handleKeyboard, true);\n    document.removeEventListener('click', this.handleOutsideClick, true);\n  };\n\n  handleOutsideClick = (event) => {\n    if (!this.palette.contains(event.target)) {\n      this.setState({\n        isClosed: true,\n      });\n    }\n  };\n\n  requestUpdate = throttle(\n    () => {\n      if (this.state.currentCommand) {\n        this.setState({ isUpdating: true });\n        this.createCommands(\n          this.state.currentCommand.contentType,\n          this.state.currentCommand.type,\n          this.props.command\n        );\n      }\n    },\n    1000,\n    { leading: true, trailing: false }\n  );\n\n  componentDidUpdate() {\n    if (this.state.currentCommand && this.state.currentCommand.command !== this.props.command) {\n      this.requestUpdate();\n    } else {\n      this.requestUpdate.cancel();\n    }\n    if (!this.state.isClosed) {\n      this.bindEventListeners();\n    } else {\n      this.removeEventListeners();\n    }\n  }\n\n  createCommand = (label, contentType, entry, type, description, thumbnail) => ({\n    label: `${label}${description ? ` - ${description}` : ''}`,\n    thumbnail,\n    contentType,\n    callback: () => {\n      const { editor, command, richTextAPI } = this.props;\n      const { logCommandPaletteAction } = richTextAPI;\n      removeCommand(editor, command);\n      switch (type) {\n        case INLINES.EMBEDDED_ENTRY:\n          insertInline(editor, entry.sys.id, false);\n          logCommandPaletteAction('insert', {\n            nodeType: INLINES.EMBEDDED_ENTRY,\n          });\n          break;\n        case BLOCKS.EMBEDDED_ASSET:\n          insertBlock(editor, BLOCKS.EMBEDDED_ASSET, entry, false);\n          logCommandPaletteAction('insert', {\n            nodeType: BLOCKS.EMBEDDED_ASSET,\n          });\n          break;\n        default:\n          insertBlock(editor, BLOCKS.EMBEDDED_ENTRY, entry, false);\n          logCommandPaletteAction('insert', {\n            nodeType: BLOCKS.EMBEDDED_ENTRY,\n          });\n          break;\n      }\n    },\n  });\n\n  onCreateAndEmbedEntity = async (contentTypeId, nodeType) => {\n    const { richTextAPI, editor, command } = this.props;\n    const { sdk } = richTextAPI;\n    removeCommand(editor, command);\n    const { createAsset, createEntry } = sdk.space;\n    const isAsset = contentTypeId === null;\n    const createEntity = () => (isAsset ? createAsset({}) : createEntry(contentTypeId, {}));\n    const entity = await createEntity();\n    const { id: entityId, type: entityType } = entity.sys;\n\n    nodeType === INLINES.EMBEDDED_ENTRY\n      ? insertInline(editor, entity.sys.id, false)\n      : insertBlock(editor, nodeType, entity);\n\n    richTextAPI.logCommandPaletteAction('insert', {\n      nodeType,\n    });\n\n    const { navigator } = sdk;\n    const openEntity = entityType === 'Asset' ? navigator.openAsset : navigator.openEntry;\n    return openEntity(entityId, { slideIn: true });\n  };\n\n  createContentTypeActions = async (actionBuilder, contentType) => {\n    const actions = await Promise.all([\n      actionBuilder.maybeBuildEmbedAction(BLOCKS.EMBEDDED_ENTRY, contentType, () => {\n        this.setState({ breadcrumb: contentType.name, isLoading: true });\n        this.createCommands(contentType);\n        this.clearCommand();\n      }),\n      actionBuilder.maybeBuildEmbedAction(INLINES.EMBEDDED_ENTRY, contentType, () => {\n        this.setState({ breadcrumb: contentType.name, isLoading: true });\n        this.createCommands(contentType, INLINES.EMBEDDED_ENTRY);\n        this.clearCommand();\n      }),\n      actionBuilder.maybeBuildCreateAndEmbedAction(BLOCKS.EMBEDDED_ENTRY, contentType, () =>\n        this.onCreateAndEmbedEntity(contentType.sys.id, BLOCKS.EMBEDDED_ENTRY)\n      ),\n      actionBuilder.maybeBuildCreateAndEmbedAction(INLINES.EMBEDDED_ENTRY, contentType, () =>\n        this.onCreateAndEmbedEntity(contentType.sys.id, INLINES.EMBEDDED_ENTRY)\n      ),\n    ]);\n    return actions.filter((action) => action);\n  };\n\n  createAssetActions = async (actionBuilder) => {\n    const actions = await Promise.all([\n      actionBuilder.maybeBuildEmbedAction(BLOCKS.EMBEDDED_ASSET, null, () => {\n        this.setState({ breadcrumb: 'Asset', isLoading: true });\n        this.createCommands(null, BLOCKS.EMBEDDED_ASSET);\n        this.clearCommand();\n      }),\n      actionBuilder.maybeBuildCreateAndEmbedAction(BLOCKS.EMBEDDED_ASSET, null, () =>\n        this.onCreateAndEmbedEntity(null, BLOCKS.EMBEDDED_ASSET)\n      ),\n    ]);\n    return actions.filter((action) => action);\n  };\n\n  handleScroll = (e) => {\n    if (e.target.nodeName !== 'UL') {\n      this.updatePanelPosition();\n    }\n  };\n\n  clearCommand = () => {\n    if (this.props.command !== '/') {\n      removeCommand(this.props.editor, this.props.command, 0);\n    }\n  };\n\n  createCommands = async (contentType, type, command) => {\n    this.setState({ isUpdating: true });\n    const allEntries = !contentType\n      ? await fetchAssets(this.props.richTextAPI.sdk, command)\n      : await fetchEntries(this.props.richTextAPI.sdk, contentType, command);\n\n    if (this.isComponentMounted) {\n      this.setState({\n        currentCommand: {\n          contentType,\n          type,\n          command,\n        },\n        isUpdating: false,\n        isLoading: false,\n        items: allEntries.map((entry) =>\n          this.createCommand(\n            entry.displayTitle,\n            entry.contentTypeName,\n            entry.entry,\n            type,\n            entry.description,\n            entry.thumbnail\n          )\n        ),\n      });\n    }\n  };\n\n  createInitialCommands = async () => {\n    const { sdk } = this.props.richTextAPI;\n\n    const allContentTypes = sdk.space.getCachedContentTypes();\n\n    this.setState({\n      isLoading: false,\n    });\n\n    const actionBuilder = new CommandPaletteActionBuilder(sdk);\n\n    const contentTypeActions = flatten(\n      await Promise.all(\n        allContentTypes.map((ct) => this.createContentTypeActions(actionBuilder, ct))\n      )\n    );\n\n    const assetActions = await this.createAssetActions(actionBuilder);\n\n    this.setState((prevState) => ({\n      items: [...prevState.items, ...contentTypeActions, ...assetActions],\n    }));\n  };\n\n  handleKeyboard = (e) => {\n    const isEscKey = isHotKey('esc', e); // ESC to close menu shouldn't blur editor.\n    if (isEscKey || isHotKey('down', e) || isHotKey('up', e) || isHotKey('enter', e)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    if (isEscKey || isHotKey('tab', e)) {\n      this.setState({\n        isClosed: true,\n      });\n    }\n  };\n\n  render() {\n    // Todo: Revisit tab index.\n    /* eslint-disable jsx-a11y/no-noninteractive-tabindex */\n    /* eslint-disable jsx-a11y/tabindex-no-positive */\n    if (this.state.isClosed) {\n      return null;\n    }\n    const root = window.document.body;\n    return ReactDOM.createPortal(\n      <div\n        tabIndex=\"1\"\n        ref={(ref) => {\n          this.palette = ref;\n        }}\n        style={{\n          position: 'absolute',\n          outline: 'none',\n          minWidth: 200,\n          top: this.state.anchorPosition.top,\n          left: this.state.anchorPosition.left,\n        }}>\n        <InViewport\n          onOverflowBottom={() => {\n            if (this.state.panelPosition !== 'top') {\n              this.setState({ panelPosition: 'top' }, this.updatePanelPosition);\n            }\n          }}\n          onOverflowTop={() => {\n            if (this.state.panelPosition !== 'bottom') {\n              this.setState({ panelPosition: 'bottom' }, this.updatePanelPosition);\n            }\n          }}>\n          <CommandPanelMenu\n            searchString={this.props.command === '/' ? '' : this.props.command}\n            items={this.state.items}\n            isLoading={this.state.isLoading}\n            isUpdating={this.state.isUpdating}\n            onClose={() => {\n              this.setState({\n                isClosed: true,\n              });\n            }}\n            breadcrumb={this.state.breadcrumb}\n            richTextAPI={this.props.richTextAPI}\n          />\n        </InViewport>\n      </div>,\n      root\n    );\n  }\n\n  updatePanelPosition() {\n    const anchorRect = document.getSelection().getRangeAt(0).getBoundingClientRect();\n\n    this.setState((prevState) => ({\n      anchorPosition: {\n        top:\n          prevState.panelPosition === 'bottom'\n            ? anchorRect.bottom\n            : anchorRect.top - this.paletteDimensions.height,\n        left: anchorRect.left,\n      },\n    }));\n  }\n}\n\nexport default CommandPalette;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { isEmbeddingEnabled } from './CommandPaletteService';\nimport { hasCommandPaletteDecoration, getCommandText } from './Util';\nimport CommandPanel from './CommandPanel';\nclass CommandPalette extends React.PureComponent {\n  static propTypes = {\n    editor: PropTypes.object,\n    richTextAPI: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { field } = this.props.richTextAPI.sdk;\n\n    this.state = {\n      embedsEnabled: isEmbeddingEnabled(field)\n    };\n  }\n\n  render() {\n    if (!hasCommandPaletteDecoration(this.props.editor) || !this.state.embedsEnabled) {\n      return null;\n    }\n\n    return (\n      <CommandPanel\n        editor={this.props.editor}\n        richTextAPI={this.props.richTextAPI}\n        command={getCommandText(this.props.editor)}\n      />\n    );\n  }\n}\n\nexport default CommandPalette;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass CommandMark extends React.PureComponent {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    editor: PropTypes.object,\n    attributes: PropTypes.object\n  };\n\n  render() {\n    // Todo: Revisit tab index.\n    /* eslint-disable jsx-a11y/no-noninteractive-tabindex */\n    /* eslint-disable jsx-a11y/tabindex-no-positive */\n    const { children, attributes } = this.props;\n    return (\n      <span tabIndex=\"1\" {...attributes} className=\"command-context\">\n        {children}\n      </span>\n    );\n  }\n}\n\nexport default CommandMark;\n","import React from 'react';\n\nimport { getDecorationOrDefault, hasCommandPaletteMarkType } from './Util';\nimport CommandPalette from './CommandPalette';\nimport CommandMark from './CommandMark';\n\nexport const CommandPalettePlugin = ({ richTextAPI }) => ({\n  /* eslint-disable react/display-name */\n  decorateNode: (_node, editor, next) => {\n    const others = next();\n\n    const decoration = getDecorationOrDefault(editor);\n\n    if (decoration) {\n      return [...others, decoration];\n    }\n\n    return [...others];\n  },\n  renderMark: (props, editor, next) => {\n    if (hasCommandPaletteMarkType(props.mark.type)) {\n      return (\n        <CommandMark attributes={props.attributes} editor={editor}>\n          {props.children}\n        </CommandMark>\n      );\n    }\n    return next();\n  },\n  renderEditor: (_props, editor, next) => {\n    const children = next();\n    return (\n      <React.Fragment>\n        {children}\n        <CommandPalette\n          anchor={editor.state.commandMark}\n          value={editor.value}\n          editor={editor}\n          richTextAPI={richTextAPI}\n        />\n      </React.Fragment>\n    );\n  }\n});\n","import { BLOCKS } from '@contentful/rich-text-types';\n/**\n * Checks if the first block in the document is void and is focused.\n *\n * @param {Slate.Editor} editor\n * @returns {Boolean}\n */\nexport function isVoidBlockFirstAndFocused(editor) {\n  return (\n    editor.value.document.getBlocks().first() === editor.value.focusBlock &&\n    editor.isVoid(editor.value.focusBlock)\n  );\n}\n\n/**\n * Inserts and focuses an empty paragraph as a first child to the document.\n *\n * @param {Slate.Editor} editor\n * @returns {void}\n */\n\nexport function insertParagraphAndFocusToStartOfDocument(editor) {\n  editor\n    .splitBlock()\n    .moveToStartOfDocument()\n    .setBlocks(BLOCKS.PARAGRAPH)\n    .focus();\n}\n","import isHotkey from 'is-hotkey';\nimport { isVoidBlockFirstAndFocused, insertParagraphAndFocusToStartOfDocument } from './Util';\n\n/**\n *  Provides a way to insert content before the first void block in the document.\n */\nexport const InsertBeforeFirstVoidBlockPlugin = () => ({\n  onKeyDown: (event, editor, next) => {\n    if (isHotkey('enter', event) && isVoidBlockFirstAndFocused(editor)) {\n      insertParagraphAndFocusToStartOfDocument(editor);\n      return;\n    }\n\n    return next();\n  }\n});\n","import { BLOCKS } from '@contentful/rich-text-types';\nimport { BoldPlugin } from './Bold';\nimport { ItalicPlugin } from './Italic';\nimport { UnderlinedPlugin } from './Underlined';\nimport { CodePlugin } from './Code';\nimport { QuotePlugin } from './Quote';\nimport { HyperlinkPlugin } from './Hyperlink';\nimport { SubscriptPlugin } from './Subscript';\nimport {SuperscriptPlugin } from './Superscript';\nimport {\n  Heading1Plugin,\n  Heading2Plugin,\n  Heading3Plugin,\n  Heading4Plugin,\n  Heading5Plugin,\n  Heading6Plugin\n} from './Heading';\n\nimport NewLinePlugin from './NewLinePlugin';\nimport { ParagraphPlugin } from './Paragraph';\n\nimport { EmbeddedAssetBlockPlugin, EmbeddedEntryBlockPlugin } from './EmbeddedEntityBlock';\nimport { EmbeddedEntryInlinePlugin } from './EmbeddedEntryInline';\n\nimport { ListPlugin } from './List';\nimport { HrPlugin } from './Hr';\n\nimport TrailingBlock from '@wikifactory/slate-trailing-block';\nimport { PastePlugin } from './Paste';\nimport { PasteHtmlPlugin } from './PasteHtml';\nimport { PasteTextPlugin } from './PasteText';\n\nimport { CommandPalettePlugin } from './CommandPalette';\nimport { InsertBeforeFirstVoidBlockPlugin } from './InsertBeforeFirstVoidBlock';\n\nimport schema from '../constants/Schema';\n\nexport function buildPlugins(richTextAPI) {\n  return [\n    { schema },\n    InsertBeforeFirstVoidBlockPlugin({ richTextAPI }),\n    BoldPlugin({ richTextAPI }),\n    ItalicPlugin({ richTextAPI }),\n    SubscriptPlugin({ richTextAPI }),\n    SuperscriptPlugin({ richTextAPI }),\n    UnderlinedPlugin({ richTextAPI }),\n    CodePlugin({ richTextAPI }),\n    QuotePlugin({ richTextAPI }),\n    HyperlinkPlugin({ richTextAPI }),\n    Heading1Plugin({ richTextAPI }),\n    Heading2Plugin({ richTextAPI }),\n    Heading3Plugin({ richTextAPI }),\n    Heading4Plugin({ richTextAPI }),\n    Heading5Plugin({ richTextAPI }),\n    Heading6Plugin({ richTextAPI }),\n    ParagraphPlugin(),\n    HrPlugin({ richTextAPI }),\n    EmbeddedEntryInlinePlugin({ richTextAPI }),\n    EmbeddedEntryBlockPlugin({ richTextAPI }),\n    EmbeddedAssetBlockPlugin({ richTextAPI }),\n    ListPlugin({ richTextAPI }),\n    PastePlugin({ richTextAPI }),\n    PasteHtmlPlugin(),\n    PasteTextPlugin(),\n    CommandPalettePlugin({ richTextAPI }),\n    TrailingBlock({ type: BLOCKS.PARAGRAPH }),\n    NewLinePlugin()\n  ];\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownList, Button } from '@contentful/forma-36-react-components';\n\nclass EntryEmbedDropdown extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    isOpen: PropTypes.bool,\n    disabled: PropTypes.bool,\n    onClose: PropTypes.func,\n    onToggle: PropTypes.func,\n  };\n\n  render() {\n    const { onToggle, isOpen, onClose, children } = this.props;\n    return (\n      <Dropdown\n        className=\"toolbar-entry-dropdown\"\n        position=\"bottom-right\"\n        toggleElement={\n          <Button\n            onClick={onToggle}\n            data-test-id=\"toolbar-entry-dropdown-toggle\"\n            className=\"toolbar-entry-dropdown-toggle\"\n            indicateDropdown\n            buttonType=\"muted\"\n            size=\"small\"\n            icon=\"Plus\"\n            disabled={this.props.disabled}>\n            Embed\n          </Button>\n        }\n        isOpen={isOpen}\n        onClose={onClose}>\n        <DropdownList className=\"toolbar-entry-dropdown-list\">{children}</DropdownList>\n      </Dropdown>\n    );\n  }\n}\n\nexport default EntryEmbedDropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { EditorToolbar, EditorToolbarDivider } from '@contentful/forma-36-react-components';\n\nimport Bold from '../plugins/Bold';\nimport Italic from '../plugins/Italic';\nimport Underlined from '../plugins/Underlined';\nimport Code from '../plugins/Code';\nimport Quote from '../plugins/Quote';\nimport {\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  Paragraph,\n  HeadingDropdown,\n} from '../plugins/Heading';\n\nimport Hyperlink from '../plugins/Hyperlink';\nimport { css } from 'emotion';\n\nimport EmbeddedEntryInline from '../plugins/EmbeddedEntryInline';\nimport EmbeddedEntityBlock from '../plugins/EmbeddedEntityBlock';\nimport EntryEmbedDropdown from '../plugins/EntryEmbedDropdown';\n\nimport { UnorderedList, OrderedList } from '../plugins/List';\nimport Hr from '../plugins/Hr';\n\nimport { BLOCKS, MARKS, INLINES } from '@contentful/rich-text-types';\n\nimport { isNodeTypeEnabled, isMarkEnabled } from '../validations';\n\nconst styles = {\n  embedActionsWrapper: css({\n    display: ['-webkit-box', '-ms-flexbox', 'flex'],\n    webkitAlignSelf: 'flex-start',\n    alignSelf: 'flex-start',\n    msFlexItemAlign: 'start',\n    marginLeft: 'auto',\n  }),\n  formattingOptionsWrapper: css({\n    display: ['-webkit-box', '-ms-flexbox', 'flex'],\n    msFlexAlign: 'center',\n    webkitBoxAlign: 'center',\n    alignItems: 'center',\n    msFlexWrap: 'wrap',\n    flexWrap: 'wrap',\n    marginRight: '20px',\n  }),\n};\n\nexport default class Toolbar extends React.Component {\n  static propTypes = {\n    richTextAPI: PropTypes.object.isRequired,\n    isDisabled: PropTypes.bool.isRequired,\n    editor: PropTypes.object.isRequired,\n    onChange: PropTypes.func.isRequired,\n  };\n\n  hasMounted = false;\n\n  isReadyToSetFocusProgrammatically = false;\n\n  state = {\n    headingMenuOpen: false,\n    canAccessAssets: false,\n    ...getValidationInfo(this.props.richTextAPI.sdk.field),\n  };\n\n  componentDidMount() {\n    this.hasMounted = true;\n    this.props.richTextAPI.sdk.access.can('read', 'Asset').then((canReadAssets) => {\n      if (this.hasMounted) {\n        // Prevent setting state on unmounted component\n        this.setState({ canAccessAssets: canReadAssets });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.hasMounted = false;\n  }\n\n  onChange = (...args) => {\n    this.setState({ headingMenuOpen: false });\n    this.props.onChange(...args);\n  };\n\n  toggleEmbedDropdown = () =>\n    this.setState((prevState) => ({\n      isEmbedDropdownOpen: !prevState.isEmbedDropdownOpen,\n    }));\n\n  handleEmbedDropdownClose = () =>\n    this.setState({\n      isEmbedDropdownOpen: false,\n    });\n\n  renderEmbeds = (props) => {\n    const field = this.props.richTextAPI.sdk.field;\n\n    const inlineEntryEmbedEnabled = isNodeTypeEnabled(field, INLINES.EMBEDDED_ENTRY);\n    const blockEntryEmbedEnabled = isNodeTypeEnabled(field, BLOCKS.EMBEDDED_ENTRY);\n    const blockAssetEmbedEnabled =\n      this.state.canAccessAssets && isNodeTypeEnabled(field, BLOCKS.EMBEDDED_ASSET);\n\n    const numEnabledEmbeds = [\n      inlineEntryEmbedEnabled,\n      blockEntryEmbedEnabled,\n      blockAssetEmbedEnabled,\n    ].filter(Boolean).length;\n\n    return (\n      <div className={styles.embedActionsWrapper}>\n        {numEnabledEmbeds > 1 ? (\n          <EntryEmbedDropdown\n            onToggle={this.toggleEmbedDropdown}\n            isOpen={this.state.isEmbedDropdownOpen}\n            disabled={props.disabled}\n            onClose={this.handleEmbedDropdownClose}>\n            {blockEntryEmbedEnabled && (\n              <EmbeddedEntityBlock nodeType={BLOCKS.EMBEDDED_ENTRY} {...props} />\n            )}\n            {inlineEntryEmbedEnabled && <EmbeddedEntryInline {...props} />}\n            {blockAssetEmbedEnabled && (\n              <EmbeddedEntityBlock nodeType={BLOCKS.EMBEDDED_ASSET} {...props} />\n            )}\n          </EntryEmbedDropdown>\n        ) : (\n          <React.Fragment>\n            {blockEntryEmbedEnabled && (\n              <EmbeddedEntityBlock nodeType={BLOCKS.EMBEDDED_ENTRY} isButton {...props} />\n            )}\n            {inlineEntryEmbedEnabled && <EmbeddedEntryInline isButton {...props} />}\n            {blockAssetEmbedEnabled && (\n              <EmbeddedEntityBlock nodeType={BLOCKS.EMBEDDED_ASSET} isButton {...props} />\n            )}\n          </React.Fragment>\n        )}\n      </div>\n    );\n  };\n\n  toggleHeadingMenu = (event) => {\n    event.preventDefault();\n    this.setState((prevState) => ({\n      headingMenuOpen: !prevState.headingMenuOpen,\n    }));\n  };\n\n  closeHeadingMenu = () =>\n    this.setState({\n      headingMenuOpen: false,\n    });\n\n  render() {\n    const { editor, isDisabled, richTextAPI } = this.props;\n    if (editor.value.selection.isFocused) {\n      // If the Slate input has ever been focused by the user, we can now also\n      // programmatically use `editor.setFocus()` without undesired side-effects.\n      this.isReadyToSetFocusProgrammatically = true;\n    }\n    const props = {\n      editor,\n      onToggle: this.onChange,\n      onCloseEmbedMenu: this.toggleEmbedDropdown,\n      disabled: isDisabled,\n      richTextAPI,\n      canAutoFocus: this.isReadyToSetFocusProgrammatically,\n    };\n    const { field } = richTextAPI.sdk;\n    const { isAnyHyperlinkEnabled, isAnyListEnabled, isAnyMarkEnabled } = this.state;\n    const currentBlockType = props.editor.value.blocks.getIn([0, 'type']);\n    return (\n      <EditorToolbar data-test-id=\"toolbar\">\n        <div className={styles.formattingOptionsWrapper}>\n          <HeadingDropdown\n            onToggle={this.toggleHeadingMenu}\n            isToggleActive={true}\n            isOpen={this.state.headingMenuOpen}\n            onClose={this.closeHeadingMenu}\n            currentBlockType={currentBlockType}\n            disabled={props.disabled}>\n            <Paragraph {...props} />\n            {isNodeTypeEnabled(field, BLOCKS.HEADING_1) && <Heading1 {...props} />}\n            {isNodeTypeEnabled(field, BLOCKS.HEADING_2) && <Heading2 {...props} />}\n            {isNodeTypeEnabled(field, BLOCKS.HEADING_3) && <Heading3 {...props} />}\n            {isNodeTypeEnabled(field, BLOCKS.HEADING_4) && <Heading4 {...props} />}\n            {isNodeTypeEnabled(field, BLOCKS.HEADING_5) && <Heading5 {...props} />}\n            {isNodeTypeEnabled(field, BLOCKS.HEADING_6) && <Heading6 {...props} />}\n          </HeadingDropdown>\n          {isAnyMarkEnabled && <EditorToolbarDivider testId=\"mark-divider\" />}\n          {isMarkEnabled(field, MARKS.BOLD) && <Bold {...props} />}\n          {isMarkEnabled(field, MARKS.ITALIC) && <Italic {...props} />}\n          {isMarkEnabled(field, MARKS.UNDERLINE) && <Underlined {...props} />}\n          {isMarkEnabled(field, MARKS.CODE) && <Code {...props} />}\n          {isAnyHyperlinkEnabled && (\n            <React.Fragment>\n              <EditorToolbarDivider testId=\"hyperlink-divider\" />\n              <Hyperlink {...props} />\n            </React.Fragment>\n          )}\n          {isAnyListEnabled && <EditorToolbarDivider testId=\"list-divider\" />}\n          {isNodeTypeEnabled(field, BLOCKS.UL_LIST) && <UnorderedList {...props} />}\n          {isNodeTypeEnabled(field, BLOCKS.OL_LIST) && <OrderedList {...props} />}\n          {isNodeTypeEnabled(field, BLOCKS.QUOTE) && <Quote {...props} />}\n          {isNodeTypeEnabled(field, BLOCKS.HR) && <Hr {...props} />}\n        </div>\n        {this.renderEmbeds(props)}\n      </EditorToolbar>\n    );\n  }\n}\n\nfunction getValidationInfo(field) {\n  const isAnyMarkEnabled =\n    isMarkEnabled(field, MARKS.BOLD) ||\n    isMarkEnabled(field, MARKS.ITALIC) ||\n    isMarkEnabled(field, MARKS.UNDERLINE) ||\n    isMarkEnabled(field, MARKS.CODE);\n\n  const isAnyHyperlinkEnabled =\n    isNodeTypeEnabled(field, INLINES.HYPERLINK) ||\n    isNodeTypeEnabled(field, INLINES.ASSET_HYPERLINK) ||\n    isNodeTypeEnabled(field, INLINES.ENTRY_HYPERLINK);\n\n  const isAnyListEnabled =\n    isNodeTypeEnabled(field, BLOCKS.UL_LIST) ||\n    isNodeTypeEnabled(field, BLOCKS.OL_LIST) ||\n    isNodeTypeEnabled(field, BLOCKS.QUOTE) ||\n    isNodeTypeEnabled(field, BLOCKS.HR);\n  return {\n    isAnyMarkEnabled,\n    isAnyHyperlinkEnabled,\n    isAnyListEnabled,\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from 'emotion';\n\nconst styles = {\n  nativeSticky: css`\n    position: -webkit-sticky;\n    position: sticky;\n    top: -1px;\n    z-index: 2;\n  `,\n};\n\nconst StickyToolbarWrapper = ({ isDisabled, children }) => (\n  <div className={isDisabled ? '' : styles.nativeSticky}>{children}</div>\n);\n\nStickyToolbarWrapper.propTypes = {\n  isDisabled: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nexport default StickyToolbarWrapper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Editor } from 'slate-react';\nimport { Value, Editor as BasicEditor } from 'slate';\nimport noop from 'lodash/noop';\nimport debounce from 'lodash/debounce';\nimport { List, is } from 'immutable';\nimport deepEquals from 'fast-deep-equal';\n\nimport { BLOCKS, EMPTY_DOCUMENT } from '@contentful/rich-text-types';\nimport { toContentfulDocument, toSlatejsDocument } from '@contentful/contentful-slatejs-adapter';\nimport { EntityProvider } from '@contentful/field-editor-reference';\n\nimport schema from './constants/Schema';\nimport { createRichTextAPI } from './plugins/shared/PluginApi';\nimport { buildPlugins } from './plugins';\nimport Toolbar from './Toolbar';\nimport StickyToolbarWrapper from './Toolbar/StickyToolbarWrapper';\nimport { FieldConnector } from '@contentful/field-editor-shared';\nimport { css, cx } from 'emotion';\nimport tokens from '@contentful/forma-36-tokens';\n\nconst STYLE_EDITOR_BORDER = `1px solid ${tokens.colorElementDark}`;\n\nconst styles = {\n  root: css({\n    position: 'relative',\n  }),\n  editor: css({\n    borderRadius: '0 0 3px 3px',\n    border: STYLE_EDITOR_BORDER,\n    borderTop: 0,\n    padding: '20px',\n    fontSize: tokens.spacingM,\n    minHeight: '400px',\n    background: tokens.colorWhite,\n    outline: 'none',\n    whiteSpace: 'pre-wrap',\n    overflowWrap: 'break-word',\n    webkitUserModify: 'read-write-plaintext-only',\n    a: {\n      span: {\n        cursor: 'not-allowed',\n        '&:hover': {\n          cursor: 'not-allowed',\n        },\n      },\n    },\n  }),\n  hiddenToolbar: css({\n    borderTop: STYLE_EDITOR_BORDER,\n  }),\n  enabled: css({\n    background: tokens.colorWhite,\n    a: {\n      span: {\n        cursor: 'pointer',\n        '&:hover': {\n          cursor: 'pointer',\n        },\n      },\n    },\n  }),\n  disabled: css({\n    background: tokens.colorElementLightest,\n  }),\n};\n\nconst createSlateValue = (contentfulDocument) => {\n  const document = toSlatejsDocument({\n    document: contentfulDocument,\n    schema,\n  });\n  const value = Value.fromJSON({\n    document,\n    schema,\n  });\n  // Normalize document instead of doing this in the Editor instance as this would\n  // trigger unwanted operations that would result in an unwanted version bump.\n  // TODO: This normalization step wouldn't be necessary if we had a perfect\n  // adapter for the version of Slate we are currently using.\n  const editor = new BasicEditor({ readOnly: true, value }, { normalize: true });\n  const normalizedValue = editor.value;\n  return normalizedValue;\n};\n\nconst EMPTY_SLATE_DOCUMENT = createSlateValue(EMPTY_DOCUMENT);\n\nexport class ConnectedRichTextEditor extends React.Component {\n  static propTypes = {\n    sdk: PropTypes.shape({\n      field: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        locale: PropTypes.string.isRequired,\n      }).isRequired,\n      access: PropTypes.shape({\n        can: PropTypes.func.isRequired,\n      }).isRequired,\n      parameters: PropTypes.shape({\n        instance: PropTypes.shape({\n          getEntryUrl: PropTypes.func,\n          getAssetUrl: PropTypes.func,\n        }).isRequired,\n      }),\n    }).isRequired,\n    value: PropTypes.object,\n    isDisabled: PropTypes.bool,\n    onChange: PropTypes.func,\n    onAction: PropTypes.func,\n    isToolbarHidden: PropTypes.bool,\n    actionsDisabled: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    value: EMPTY_DOCUMENT,\n    onChange: noop,\n    onAction: noop,\n    isDisabled: false,\n    isToolbarHidden: false,\n    actionsDisabled: false,\n  };\n\n  state = {\n    lastOperations: List(),\n    value:\n      this.props.value && this.props.value.nodeType === BLOCKS.DOCUMENT\n        ? createSlateValue(this.props.value)\n        : EMPTY_SLATE_DOCUMENT,\n  };\n\n  editor = React.createRef();\n\n  richTextAPI = createRichTextAPI({\n    sdk: this.props.sdk,\n    onAction: this.props.onAction,\n  });\n\n  slatePlugins = buildPlugins(this.richTextAPI);\n\n  onChange = (editor) => {\n    const { value, operations } = editor;\n    this.setState({\n      value,\n      lastOperations: operations.filter(isRelevantOperation),\n    });\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.isDisabled !== nextProps.isDisabled) {\n      return true;\n    }\n    const isStateValueUpdate = !is(this.state.value, nextState.value);\n    const isPropsValueUpdate = this.props.value !== nextProps.value;\n    return isStateValueUpdate || isPropsValueUpdate;\n  }\n\n  callOnChange = debounce(() => {\n    const doc = toContentfulDocument({\n      document: this.state.value.document.toJSON(),\n      schema,\n    });\n    this.props.onChange(doc);\n  }, 500);\n\n  componentDidUpdate(prevProps) {\n    /* eslint-disable react/no-did-update-set-state */\n    const isIncomingChange = () => !deepEquals(prevProps.value, this.props.value);\n    const isDocumentChanged = !this.state.lastOperations.isEmpty();\n\n    if (!this.props.isDisabled && isDocumentChanged) {\n      this.setState({ lastOperations: List() }, () => this.callOnChange());\n    } else if (isIncomingChange()) {\n      this.setState({\n        value: createSlateValue(this.props.value),\n      });\n    }\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  handleKeyDown = (event, editor, next) => {\n    const ESC = 27;\n\n    if (event.keyCode === ESC) {\n      event.currentTarget.blur();\n    }\n\n    return next();\n  };\n\n  render() {\n    const classNames = cx(\n      styles.editor,\n      this.props.isDisabled ? styles.disabled : styles.enabled,\n      this.props.isToolbarHidden && styles.hiddenToolbar\n    );\n\n    return (\n      <div className={styles.root} data-test-id=\"rich-text-editor\">\n        {!this.props.isToolbarHidden && (\n          <StickyToolbarWrapper isDisabled={this.props.isDisabled}>\n            <Toolbar\n              editor={this.editor.current || new BasicEditor({ readOnly: true })}\n              onChange={this.onChange}\n              isDisabled={this.props.isDisabled}\n              richTextAPI={this.richTextAPI}\n            />\n          </StickyToolbarWrapper>\n        )}\n\n        <Editor\n          data-test-id=\"editor\"\n          value={this.state.value}\n          ref={this.editor}\n          onChange={this.onChange}\n          onKeyDown={this.handleKeyDown}\n          plugins={this.slatePlugins}\n          readOnly={this.props.isDisabled}\n          className={classNames}\n          actionsDisabled={this.props.actionsDisabled}\n          options={{\n            normalize: false, // No initial normalizaiton as we pass a normalized document.\n          }}\n        />\n      </div>\n    );\n  }\n}\n\n/**\n * Returns whether a given operation is relevant enough to trigger a save.\n *\n * @param {slate.Operation} op\n * @returns {boolean}\n */\nfunction isRelevantOperation(op) {\n  if (op.type === 'set_value') {\n    if (op.properties.data) {\n      // Relevant for undo/redo that can be empty ops that we want to ignore.\n      return false;\n    }\n  } else if (op.type === 'set_selection') {\n    return false;\n  }\n  return true;\n}\n\nexport default function RichTextEditor(props) {\n  /* eslint-disable react/prop-types */\n  const { sdk, isInitiallyDisabled, ...otherProps } = props;\n  return (\n    <EntityProvider sdk={sdk}>\n      <FieldConnector\n        throttle={0}\n        field={sdk.field}\n        isInitiallyDisabled={isInitiallyDisabled}\n        isEmptyValue={(value) => {\n          return !value || deepEquals(value, EMPTY_DOCUMENT);\n        }}\n        isEqualValues={(value1, value2) => {\n          return deepEquals(value1, value2);\n        }}>\n        {({ lastRemoteValue, disabled, setValue, externalReset }) => {\n          return (\n            <ConnectedRichTextEditor\n              {...otherProps}\n              // on external change reset component completely and init with initial value again\n              key={`rich-text-editor-${externalReset}`}\n              value={lastRemoteValue}\n              sdk={sdk}\n              isDisabled={disabled}\n              onChange={(value) => {\n                setValue(value);\n              }}\n            />\n          );\n        }}\n      </FieldConnector>\n    </EntityProvider>\n  );\n}\n\nRichTextEditor.defaultProps = {\n  isInitiallyDisabled: true,\n};\n","import React from 'react';\nimport { ModalDialogLauncher } from '@contentful/field-editor-shared';\nimport { HyperlinkDialog } from './HypelinkDialog/HyperlinkDialog';\n\nexport const openRichTextDialog = (sdk) => (options) => {\n  if (options.parameters && options.parameters.type === 'rich-text-hyperlink-dialog') {\n    return ModalDialogLauncher.openDialog(options, ({ onClose }) => {\n      return <HyperlinkDialog {...options.parameters} onClose={onClose} sdk={sdk} />;\n    });\n  }\n  return Promise.reject();\n};\n","import React from 'react';\nimport { HyperlinkDialog } from './HypelinkDialog/HyperlinkDialog';\n\nexport const renderRichTextDialog = (sdk) => {\n  const parameters = sdk.parameters.invocation;\n  if (parameters.type === 'rich-text-hyperlink-dialog') {\n    sdk.window.startAutoResizer();\n    return <HyperlinkDialog {...sdk.parameters.invocation} onClose={sdk.close} sdk={sdk} />;\n  }\n  return <div />;\n};\n"],"names":["opt","config","types","BLOCKS","OL_LIST","UL_LIST","typeItem","LIST_ITEM","typeDefault","PARAGRAPH","plugin","EditList","mapVoidTypes","nodeTypes","fromPairs","map","nodeType","isVoid","listPlugin","ListPlugin","document","nodes","TOP_LEVEL_BLOCKS","blocks","Object","values","INLINES","objects","HEADING_1","HEADING_2","HEADING_3","HEADING_4","HEADING_5","HEADING_6","VOID_BLOCKS","schema","QUOTE","match","CONTAINERS","type","min","normalize","editor","error","code","unwrapBlockByKey","node","key","inlines","HYPERLINK","ENTRY_HYPERLINK","ASSET_HYPERLINK","EMBEDDED_ENTRY","actionOrigin","TOOLBAR","SHORTCUT","VIEWPORT","COMMAND_PALETTE","createActionLogger","onAction","origin","name","data","createRichTextAPI","sdk","richTextAPI","logViewportAction","logShortcutAction","logToolbarAction","logCommandPaletteAction","EDITOR_PLUGIN_PROP_TYPES","PropTypes","shape","object","isRequired","func","TOOLBAR_PLUGIN_PROP_TYPES","onToggle","disabled","bool","isButton","canAutoFocus","ToolbarIcon","handleClick","event","preventDefault","props","render","icon","isActive","title","React","Component","propTypes","string","MarkPropTypes","attributes","children","mark","NodePropTypes","Tag","tagProps","CommonMark","displayName","haveMarks","value","activeMarks","some","haveBlocks","haveInlines","inline","haveAnyInlines","size","haveEveryInlineOfType","every","haveTextInSomeBlocks","block","text","styles","bold","css","color","fontWeight","tokens","fontWeightDemiBold","italic","fontStyle","lineHeight","fontFamily","fontStackMonospace","fontSize","tagName","hotkey","renderMark","_editor","next","markDecorator","className","onKeyDown","isHotkey","toggleMark","action","markType","toolbarActionHandlerWithSafeAutoFocus","component","customHandler","selection","isFocused","focus","Mark","handleToggle","React.createElement","BoldPlugin","markPlugin","MARKS","BOLD","Bold","markToggleDecorator","ItalicPlugin","ITALIC","Italic","UnderlinedPlugin","UNDERLINE","Underlined","CodePlugin","CODE","Code","toggleChange","setBlocks","isBlockActive","applyChange","Block","actionName","getParent","range","start","startBlock","getClosestBlock","isSelectionInQuote","ancestor","unwrapBlock","wrapBlock","headingCss","fontWeightMedium","margin","spacingS","paragraph","lineHeightDefault","marginBottom","blockquote","borderLeft","colorElementLight","paddingLeft","background","padding","colorTextMid","borderRadius","textLink","orderedList","listStyleType","unorderedList","listItem","listStyle","spacingL","heading1","heading2","heading3","heading4","heading5","heading6","CommonNode","camelCase","newPlugin","defaultType","renderNode","commonNode","e","QuotePlugin","Blockquote","blockToggleDecorator","undefined","FetchingWrappedEntryCard","useEntities","loadEntry","entries","entryId","entry","onEntityFetchComplete","isDisabled","onRemove","contentType","space","getCachedContentTypes","find","sys","id","getAsset","getEntityScheduledActions","getEntryUrl","isSelected","locale","locales","onEdit","FetchingWrappedAssetCard","loadAsset","assets","assetId","asset","getAssetUrl","LINK_TYPES","URI","ENTRY","ASSET","isFeaturingEntitySelector","entitySelectorConfigs","Entry","Asset","entityToLink","entity","linkType","HyperlinkDialog","handleSubmit","onClose","getValue","selectEntry","contentTypes","dialogs","selectSingleEntry","setTargetEntity","selectAsset","selectSingleAsset","uri","target","isEntityLink","Boolean","entityLinks","allowedHyperlinkTypes","includes","state","setState","isLinkComplete","requiresText","hideText","labels","renderFields","confirm","isUriInputAutoFocused","testId","autoFocus","placeholder","renderEntityField","resetEntity","entityLink","isEntitySelectorVisible","marginLeft","renderEntitySelector","marginTop","oneOf","arrayOf","defaultProps","openHyperlinkDialog","showTextInput","isNew","openCurrent","width","shouldCloseOnEscapePress","shouldCloseOnOverlayClick","allowHeightOverflow","parameters","field","flow","v","get","validations","newEntitySelectorConfigFromRichTextField","entityType","getEntityTypeFromRichTextNode","getLinkedContentTypeIdsForNodeType","words","split","indexOf","Error","VALIDATIONS","ENABLED_MARKS","ENABLED_NODE_TYPES","getRichTextValidation","validationType","isFormattingOptionEnabled","nodeTypeOrMark","enabledFormattings","isNodeTypeEnabled","isMarkEnabled","HYPERLINK_TYPES","nodeToHyperlinkType","getAllowedHyperlinkTypes","hyperlinkTypes","filter","getEntitySelectorConfigs","mayEditLink","isExpanded","hasHyperlink","hasOnlyHyperlinkInlines","toggleLink","logAction","removeLinks","insertLink","change","blur","fragment","trim","result","last","insertBlock","insertText","moveFocusForward","length","call","wrapLink","linkTypeToNodeType","forEach","unwrapInline","editLink","link","toJSON","oldUri","oldTarget","setInlines","wrapInline","moveToEnd","HyperlinkToolbarIcon","hyperlinkTooltipStyles","entityContentType","colorTextLightest","marginRight","spacingXs","content","entityTitle","separator","hyperlinkWrapper","display","position","a","hyperlink","fill","textColorDark","hyperlinkIEFallback","textDecoration","hyperlinkIcon","top","height","webkitTransition","transition","browser","detectBrowser","isEdge","SUPPORTS_NATIVE_SLATE_HYPERLINKS","truncate","str","substr","replace","fetchAllData","entityId","localeCode","defaultLocaleCode","getEntity","getEntry","contentTypeId","getContentType","entityHelpers","getEntryTitle","defaultTitle","getAssetTitle","entityDescription","getEntityDescription","jobs","entityStatus","getEntryStatus","contentTypeName","renderEntityInfo","EntityStatusTag","statusLabel","tagTypeMap","published","draft","archived","changed","EntityHyperlinkTooltip","useState","requestStatus","setRequestStatus","useEffect","then","entityInfo","console","log","toLowerCase","tooltip","Hyperlink","isHotKey","stopPropagation","renderEntityLink","renderLink","href","isUrl","tooltipContainer","cx","noop","test","HyperlinkPlugin","isHyperlink","moveToRangeOfNode","normalizeNode","getInlines","inlineNode","unwrapInlineByKey","SubscriptPlugin","SUBSCRIPT","SuperscriptPlugin","SUPERSCRIPT","root","button","span","h1","h2","h3","h4","h5","h6","getStyleForType","ToolbarDropdownListItem","handleSelect","contentWidthDefault","svg","blockTitles","EMBEDDED_ASSET","HeadingDropdown","getStyleNameForChange","currentBlockType","isOpen","newHeadingDropdownItem","Heading","blockSelectDecorator","Paragraph","shouldToggle","currentBlock","offset","initialRange","splitBlock","setBlocksAtRange","Heading1Plugin","Heading2Plugin","Heading3Plugin","Heading4Plugin","Heading5Plugin","Heading6Plugin","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","ParagraphPlugin","hasBlockOfType","selectEntityAndInsert","baseConfig","selectEntity","withCreate","createNode","focusNextLine","linkedEntityBlock","EntityLinkToolbarIcon","onCloseEmbedMenu","handleAction","getEntityTypeFromNodeType","baseClass","LinkedEntityBlock","handleEditClick","getEntitySys","navigator","openEntity","openAsset","openEntry","slideIn","handleRemoveClick","removeNodeByKey","readOnly","actionsDisabled","instance","EmbeddedEntityBlockPlugin","EntityLinkBlock","EmbeddedEntryBlockPlugin","EmbeddedAssetBlockPlugin","createInlineNode","insertInline","moveToStartOfNextText","hasOnlyInlineEntryInSelection","end","selectEntryAndInsert","canInsertInline","EntryLinkToolbarIcon","scheduledIcon","verticalAlign","spacing2Xs","FetchingWrappedInlineEntryCard","allContentTypes","status","isReadOnly","webkitUserSelect","mozUserSelect","msUserSelect","userSelect","EmbeddedEntryInline","EmbeddedEntryInlinePlugin","utils","changes","unwrapList","wrapInList","isSelectionInList","getCurrentList","currentList","setNodeByKey","list","EditListWrapper","UnorderedList","listToggleDecorator","OrderedList","hr","spacingM","colorElementMid","hrSelected","colorPrimary","HrPlugin","HR","Hr","getCharacterCount","contentfulSlateJSAdapter","documentToPlainTextString","PastePlugin","onPaste","_event","characterCountSelection","global","getSelection","toString","characterCountBefore","setTimeout","characterCountAfter","BLOCK_TAGS","p","ul","ol","MARK_TAGS","strong","b","em","i","u","sup","sub","isGoogleWrapper","el","startsWith","isGoogleBold","style","isGoogleItalic","isGoogleUnderline","gDocsRules","deserialize","isFromGoogleDocs","ownerDocument","querySelector","childNodes","marks","push","textNode","leaves","textContent","listItems","links","getAttribute","macOSTrailingBreak","classList","contains","RULES","create","HtmlSerializer","rules","PasteHtmlPlugin","serializer","createSerializer","transfer","getEventTransfer","html","insertFragment","PasteTextPlugin","PlainSerializer","defaultBlock","delimiter","RICH_TEXT_COMMANDS_CONTEXT_MARK_TYPE","getCommandText","startText","COMMAND_REGEX","startOffset","textBefore","slice","exec","getDecorationOrDefault","inputValue","decoration","anchor","hasCommandPaletteMarkType","hasCommandPaletteDecoration","decorations","getDecorations","isEmpty","commandPaletteDecoration","d","removeCommand","command","anchorOffset","removeTextByKey","ACTIONS","EMBED","CREATE_EMBED","fetchAssets","query","getAssets","items","displayTitle","fields","thumbnail","file","url","fetchEntries","getEntries","content_type","Promise","all","description","isValidLinkedContentType","embedType","val","typeVal","linkContentType","reduce","pre","cur","ct","isEmbeddingEnabled","CommandPaletteActionBuilder","maybeBuildEmbedAction","callback","isAsset","buildAction","maybeBuildCreateAndEmbedAction","access","can","canCreateEntryOfContentType","canCreateAssets","actionType","isInline","label","group","commandPanel","colorWhite","boxShadow","border","colorElementDark","fontStackPrimary","overflowY","commandPanelList","item","fontSizeM","borderBottom","colorTextDark","divider","letterSpacing","letterSpacingWide","fontSizeS","textTransform","skeletonContainer","textAlign","whiteSpace","overflow","textOverflow","alignItems","navBar","bottom","colorElementLightest","loader","instruction","colorTextLight","closeButton","itemPropType","CommandPanelItem","listItemRef","componentDidUpdate","scrollIntoView","index","classNames","ref","number","Instruction","CommandPanel","selectedKey","handleKeyboard","selectedItem","renderNavigationBar","breadcrumb","renderStatusBar","instructions","isUpdating","renderSkeleton","getDerivedStateFromProps","itemsHasUpdated","originalItems","searchStringHasUpdated","searchString","originalSearchString","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","renderGroups","groups","uniqBy","groupName","renderItems","cn","isLoading","DEFAULT_POSITION","left","CommandPalette","anchorPosition","panelPosition","paletteDimensions","bindEventListeners","handleScroll","handleOutsideClick","removeEventListeners","palette","isClosed","requestUpdate","throttle","currentCommand","createCommands","leading","trailing","createCommand","onCreateAndEmbedEntity","createAsset","createEntry","createEntity","createContentTypeActions","actionBuilder","clearCommand","actions","createAssetActions","nodeName","updatePanelPosition","allEntries","isComponentMounted","createInitialCommands","flatten","contentTypeActions","assetActions","prevState","isEscKey","getBoundingClientRect","cancel","window","body","ReactDOM","createPortal","outline","minWidth","CommandPanelMenu","anchorRect","getRangeAt","PureComponent","embedsEnabled","CommandMark","CommandPalettePlugin","decorateNode","_node","others","renderEditor","_props","commandMark","isVoidBlockFirstAndFocused","getBlocks","first","focusBlock","insertParagraphAndFocusToStartOfDocument","moveToStartOfDocument","InsertBeforeFirstVoidBlockPlugin","buildPlugins","TrailingBlock","NewLinePlugin","EntryEmbedDropdown","embedActionsWrapper","webkitAlignSelf","alignSelf","msFlexItemAlign","formattingOptionsWrapper","msFlexAlign","webkitBoxAlign","msFlexWrap","flexWrap","Toolbar","hasMounted","isReadyToSetFocusProgrammatically","headingMenuOpen","canAccessAssets","getValidationInfo","onChange","toggleEmbedDropdown","isEmbedDropdownOpen","handleEmbedDropdownClose","renderEmbeds","inlineEntryEmbedEnabled","blockEntryEmbedEnabled","blockAssetEmbedEnabled","numEnabledEmbeds","EmbeddedEntityBlock","toggleHeadingMenu","closeHeadingMenu","canReadAssets","isAnyHyperlinkEnabled","isAnyListEnabled","isAnyMarkEnabled","getIn","nativeSticky","StickyToolbarWrapper","STYLE_EDITOR_BORDER","borderTop","minHeight","overflowWrap","webkitUserModify","cursor","hiddenToolbar","enabled","createSlateValue","contentfulDocument","toSlatejsDocument","Value","fromJSON","BasicEditor","normalizedValue","EMPTY_SLATE_DOCUMENT","EMPTY_DOCUMENT","ConnectedRichTextEditor","lastOperations","List","DOCUMENT","createRef","slatePlugins","operations","isRelevantOperation","callOnChange","debounce","doc","toContentfulDocument","handleKeyDown","ESC","keyCode","currentTarget","shouldComponentUpdate","nextProps","nextState","isStateValueUpdate","is","isPropsValueUpdate","prevProps","isIncomingChange","deepEquals","isDocumentChanged","isToolbarHidden","current","Editor","op","properties","RichTextEditor","isInitiallyDisabled","otherProps","value1","value2","lastRemoteValue","setValue","externalReset","openRichTextDialog","options","ModalDialogLauncher","openDialog","reject","renderRichTextDialog","invocation","startAutoResizer","close"],"mappings":"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"}